<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg"  width="500" height="500" viewbox="0 0 3 2"> 
<defs>
<desc>Bibliothek für KFZ-Schaltpläne</desc>
    <pattern id="muster2" x="10" y="10" width="10" height="10" patternUnits="userSpaceOnUse">
      <rect id="square" width="5" height="5" fill="orange" />
      <use href="#square" transform="translate(5,5)" />
    </pattern>
  <g id="Komponenten_Symbole">
    <g id="pin" stroke="black" fill="white">
      <desc>Standard Anschlusspin</desc>
      <line x1="0" y1="0" x2="10" y2="0" id="pinline"/>
      <circle cx="10" cy="0" r="3" />
    </g>
  </g>
  
  <g id="boldRect">
      <rect x="-60" y="-180" rx="20" width="320" height="200" />
  </g>
  <g id="appblocks">
    <g id="ECU_Tester">
      <rect x="-44" y="-42" width="88" height="85"  stroke="lightblue" fill="pink"/>
      <text x="0" y="-10" text-anchor="middle" font-size="15" fill="white">ECU</text>
      <text x="0" y="10" text-anchor="middle" font-size="15" fill="white">Tester</text>
    </g>
    <g id="Fueltech_DIAG">
    <rect x="-44" y="-42" width="88" height="85"  stroke="lightblue" fill="pink"/>
    <text x="0" y="-15" text-anchor="middle" font-size="15" fill="white">Fueltech</text>
    <text x="0" y="0" text-anchor="middle" font-size="15" fill="white">OBD</text>
    <text x="0" y="15" text-anchor="middle" font-size="15" fill="white">Interface</text>
    </g>
    <g id="NoTp">
    <rect x="-44" y="-42" width="88" height="85"  stroke="lightblue" fill="pink"/>
    <text x="0" y="-15" text-anchor="middle" font-size="15" fill="white">CanIf_Demo</text>
    <rect x="-40" y="0" width="80" height="40" fill="url(#muster2)"/>
    <text x="0" y="15" text-anchor="middle" font-size="15" fill="white">without</text>
    <text x="0" y="30" text-anchor="middle" font-size="15" fill="white">TP usage</text>
    </g>
  </g>
  <g id="TP_Module">
    <g id="UDS">
      <rect x="-30" y="-15" width="60" height="30" fill="lightgrey"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >UDS</text>
    </g>
    <g id="IsoTP">
      <rect x="-40" y="-15" width="80" height="30" fill="orange"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >ISO TP</text>
    </g>
    <g id="FT2p0">
      <rect x="-40" y="-15" width="80" height="30" fill="orange"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >FT2.0</text>
    </g>
    <g id="CanNM">
      <rect x="-40" y="-15" width="80" height="30" fill="url(#muster2)"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >CanNM</text>
    </g>
    <g id="XCP">
      <rect x="-40" y="-15" width="80" height="30" fill="url(#muster2)"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >XCP</text>
    </g>
    <g id="J1939">
      <rect x="-40" y="-15" width="80" height="30" fill="url(#muster2)"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >J1939</text>
    </g>
    <g id="J1939NM">
      <rect x="-40" y="-15" width="80" height="30" fill="url(#muster2)"/>
      <text x="0" y="5" text-anchor="middle" font-size="15" >J1939NM</text>
    </g>
  </g>
  
  <g id="HW_Block">  
    <rect x="0" y="0" width="400" height="95"  stroke="black" fill="white"/>
    <rect x="95" y="5" width="300" height="40"  stroke="lightblue" fill="lightblue"/>
    <rect x="95" y="50" width="300" height="40"  stroke="lightblue" fill="lightblue"/>
    <text x="50" y="55" text-anchor="middle" font-size="15" >Hardware</text>
    <text x="250" y="30" text-anchor="middle" font-size="15" fill="white">CAN expansion board</text>
    <text x="250" y="75" text-anchor="middle" font-size="15" fill="white">STM32 Nucleo development board</text>
  </g>
  <g id="HW_Abstraction">
    <rect x="0" y="0" width="400" height="75"  stroke="black" fill="white"/>
    <rect x="95" y="30" width="300" height="40"  stroke="blue" fill="blue"/>
    <text x="50" y="35" text-anchor="middle" font-size="15" >Hardware</text>
    <text x="50" y="55" text-anchor="middle" font-size="15" >Abstraction</text>
    <text x="200" y="45" text-anchor="middle" font-size="15" fill="white">STM32Cube Hardware</text>
    <text x="200" y="60" text-anchor="middle" font-size="15" fill="white">Abstraction Layer (HAL)</text>
  </g>
  <g id="HW_Interface">  
    <rect x="0" y="0" width="280" height="15"  stroke="blue" fill="lightgreen"/>
    <rect x="0" y="15" width="280" height="40"  stroke="blue" fill="green"/>
    <rect x="190" y="55" width="90" height="15"  stroke="blue" fill="lightgreen"/>
    <rect x="185" y="70" width="50" height="30"  stroke="blue" fill="green"/>
    <rect x="235" y="70" width="50" height="30"  stroke="blue" fill="green"/>
    <text x="150" y="10" text-anchor="middle" font-size="10" fill="black">COM Interface API </text>
    <text x="150" y="40" text-anchor="middle" font-size="15" fill="white">CAN Interface Module </text>
    <text x="240" y="65" text-anchor="middle" font-size="10" fill="black">Can API</text>
    <text x="210" y="81" text-anchor="middle" font-size="13" fill="white">CanDrv</text>
    <text x="210" y="93" text-anchor="middle" font-size="13" fill="white">bxCAN</text>
    <text x="260" y="81" text-anchor="middle" font-size="13" fill="white">CanDrv</text>
    <text x="260" y="93" text-anchor="middle" font-size="13" fill="white">FDCAN</text>
  </g>
  
  <g id="TP_Block">  
    <rect x="0" y="0" width="340" height="95"  stroke="black" fill="white"/>
    <text x="50" y="45" text-anchor="middle" font-size="15" >Transport</text>
    <text x="50" y="65" text-anchor="middle" font-size="15" >Protocol</text>
      <use href="#IsoTP" transform="translate(120,47) rotate(-90)" /> 
      <use href="#UDS" transform="translate(100,27) rotate(-90)" /> 
      <use href="#FT2p0" transform="translate(160,47) rotate(-90)" /> 
      <use href="#CanNM" transform="translate(200,47) rotate(-90)" /> 
      <use href="#XCP" transform="translate(240,47) rotate(-90)" /> 
      <use href="#J1939" transform="translate(280,47) rotate(-90)" /> 
      <use href="#J1939NM" transform="translate(320,47) rotate(-90)" /> 
  </g>
  <g id="App_Block_1">  
    <rect x="0" y="0" width="400" height="95"  stroke="black" fill="white"/>
    <text x="50" y="30" text-anchor="middle" font-size="15" >Application</text>
      <use href="#ECU_Tester" transform="translate(140,47)"/> 
      <use href="#Fueltech_DIAG" transform="translate(240,47)"/> 
      <use href="#NoTp" transform="translate(340,47)"/> 
  </g>
</defs>  
      <use href="#App_Block_1" transform="translate(50,20)"/> 
      <use href="#TP_Block" transform="translate(50,150)"/> 
      <use href="#HW_Abstraction" transform="translate(50,290)"/> 
      <use href="#HW_Interface" transform="translate(160,260)"/> 
      <use href="#HW_Block" transform="translate(50,370)"/> 
</svg>