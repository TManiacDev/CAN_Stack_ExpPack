<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32Cube Expansion Pack CAN Stack: Das Package integrieren</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32Cube Expansion Pack CAN Stack
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/dae/addpack.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Das Package integrieren </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#secDownload">Das STM32CubeIDE Expansion Package herunter laden</a></li>
<li class="level1"><a href="#secManagePack">Wie kommt das Expansion Package in die STM32CubeIDE</a></li>
<li class="level1"><a href="#secSelectComp">Auswahl der Module</a></li>
<li class="level1"><a href="#secConfigPack">Konfiguration der Module</a><ul><li class="level2"><a href="#secConfigMain">Basis Parameter</a><ul><ul><li class="level4"><a href="#autotoc_md0">Baudrate Parameter</a></li>
<li class="level4"><a href="#autotoc_md3">Basic Parameters</a></li>
</ul>
</ul>
</li>
<li class="level2"><a href="#secConfigHw">CAN Controller Parameter</a></li>
<li class="level2"><a href="#secConfigCanIf">Konfiguration des Interface Modules</a><ul><ul><li class="level4"><a href="#autotoc_md4">Parameter Settings</a></li>
<li class="level4"><a href="#autotoc_md5">RX/TX PDU Configuration</a></li>
</ul>
</ul>
</li>
<li class="level2"><a href="#secConfigIsoTP">Konfiguration des ISO TP Modules</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="secDownload"></a>
Das STM32CubeIDE Expansion Package herunter laden</h1>
<p>Ok, noch ist alles lokal. Also kommt noch.</p>
<h1><a class="anchor" id="secManagePack"></a>
Wie kommt das Expansion Package in die STM32CubeIDE</h1>
<p>Na über das Menu Manage Software Package </p><div class="image">
<img src="../../pre_Manage_Software_Packs.png" alt=""/>
<div class="caption">
Manage Software Packs</div></div>
 <div class="image">
<img src="../../pre_Load_From_Local.png" alt=""/>
<div class="caption">
Locales Laden des Packs</div></div>
<div class="image">
<img src="../../pre_Select_Pack_File.png" alt=""/>
<div class="caption">
Select Pack File</div></div>
<h1><a class="anchor" id="secSelectComp"></a>
Auswahl der Module</h1>
<p>Was ist alles auswählbar und welche Abhängigkeiten gibt es.</p>
<h1><a class="anchor" id="secConfigPack"></a>
Konfiguration der Module</h1>
<h2><a class="anchor" id="secConfigMain"></a>
Basis Parameter</h2>
<div class="image">
<img src="../../config_parameter.png" alt=""/>
<div class="caption">
Parameter Settings</div></div>
<h4><a class="anchor" id="autotoc_md0"></a>
Baudrate Parameter</h4>
<p>Durch diese Parameter werden durch den Source Code Generator die notwendigen Hardware Parameter berechnet um die jeweiligen Baudraten zu erzeugen. Neben diesen Parametern wird die Clock des CAN Modules aus den Systemparametern genutzt.</p>
<p>Aktuell existiert kein Support für System Clock Switch während der Laufzeit!!!</p>
<p><a class="anchor" id="autotoc_md1"></a></p><h5>List of Bitrates</h5>
<p>Hier wird die Liste der gewünschten Bitraten angelegt. Die einzelnen Bitraten werden durch Kommas getrennt.</p>
<p><a class="anchor" id="autotoc_md2"></a></p><h5>Bittiming Sample Point</h5>
<p>Sample Point als Prozent oder Kommazahl. Der Sample Point muss entweder größer 50% oder eben 0.5 &lt; x &lt; 1 sein </p><dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000001">Todo:</a></b></dt><dd>Ich muss das FTL anpassen Sample Point größer 100% vermeiden</dd></dl>
<h4><a class="anchor" id="autotoc_md3"></a>
Basic Parameters</h4>
<p>Wird noch nicht genutzt. Hier nur ein Paltzhalter</p>
<h2><a class="anchor" id="secConfigHw"></a>
CAN Controller Parameter</h2>
<div class="image">
<img src="../../config_canhw.png" alt=""/>
<div class="caption">
Parameter für bxCan Master und Slave</div></div>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Beschreibung   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bitrate at Controller Startup  </td><td class="markdownTableBodyNone">Hier kann eine Bitrate ausgewählt werden welche zuvor im Bereich "Baudrate Parameter" definiert wurde   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Controller Mode  </td><td class="markdownTableBodyNone" rowspan="7">Dies sind identische Parameter wie bei der Konfiguration über die HAL.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Time Triggered Mode   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Auto Bus off   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Auto Wake up   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Auto Retransmission   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Receive FIFO Locked   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">time based priority on transmission   </td></tr>
</table>
<h2><a class="anchor" id="secConfigCanIf"></a>
Konfiguration des Interface Modules</h2>
<div class="image">
<img src="../../config_canif.png" alt=""/>
<div class="caption">
Parameter für CAN Interface</div></div>
<h4><a class="anchor" id="autotoc_md4"></a>
Parameter Settings</h4>
<p>Größe des Rx bzw des Tx Buffers</p>
<p>Im Gegensatz zu AUTOSAR habe ich die Buffer im <a class="el" href="../../d0/d88/class_can_if.html" title="the class to work on the CAN controller interface">CanIf</a> Module umgesetzt. Das bxCan Modul hat nur drei Rx Mailboxen. Das Hardware Module entspricht der STM HAL, welche ja unverändert übernommen wird.</p>
<h4><a class="anchor" id="autotoc_md5"></a>
RX/TX PDU Configuration</h4>
<p>Alle Parameter sind als Komma-Listen zu benutzten. Das heißt auch, dass in jeder Liste die gleiche Anzahl an Elementen vorhanden sein muss. Stimmt die Anzahl der Elemente eines Parameters nicht, so wird der Source Code Generator eine Fehlermeldung im generieren.</p>
<p><a class="anchor" id="autotoc_md6"></a></p><h5>Name list of Interface L-PDUs</h5>
<p>Liste der L-PDU Namen. <a class="anchor" id="autotoc_md7"></a></p><h5>List of CAN Ids / List of CAN Id Masking</h5>
<p>Diese zwei Parameter werden zur Konfiguration der Hardware Filter genutzt.</p>
<p>Das erste Zeichen gibt an ob das Extended Id Bit (IDE) gesetzt werden soll. Aktuell wird nur geprüft ob das erste Zeichen ein 'E' oder ein 'e' ist. Ist dies nicht der Fall, dann wird von Standard CAN ausgegangen. Das Trennzeichen an zweiter Stelle ist egal. Alle Zeichen ab der dritten Stelle bis zum nächsten Komma werden unverändert in den Source Code übernommen. Es stehen also alle gängigen Formationen (hex, dec, oct, bin) zur Verfügung.</p>
<p><a class="anchor" id="autotoc_md8"></a></p><h5>List of message length</h5>
<p>Anzahl der Datenbytes</p>
<p><a class="anchor" id="autotoc_md9"></a></p><h5>List of CAN HW Controller</h5>
<p>Der verwendete CAN Controller per Name. Aktuell werden die Namen des bxCan Modules unterstützt. Also können Master oder Slave benannt werden. Alternativ kann mit dem ersten Buchstaben, also 'M' oder 'S' abgekürzt werden.</p>
<p><a class="anchor" id="autotoc_md10"></a></p><h5>List of assigned N-PDU</h5>
<p>Hier müssen zwingend die gleichen Namen wie im entsprechenden Protokoll Layer verwendet werden.</p>
<p>Aktuell habe ich noch keine Möglichkeit die Namen aus dem Protokoll Layer per Auswahl zur Verfügung zu stellen. Ich werde aber im Code Generator die Namen überprüfen.</p>
<p><a class="anchor" id="autotoc_md11"></a></p><h5>List the assigned upper layer</h5>
<p>Verwendetes Transport Layer</p>
<h2><a class="anchor" id="secConfigIsoTP"></a>
Konfiguration des ISO TP Modules</h2>
<div class="image">
<img src="../../config_isotp.png" alt=""/>
<div class="caption">
Parameter für ISO TP</div></div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
