<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32Cube Expansion Pack CAN Stack: E:/Embedded_SourceCode/STM32IDE_ws/NucleoCanDev/Drivers/BSP/TM_Engineering_board/CanIf/CanIf.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32Cube Expansion Pack CAN Stack
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d5a/_can_if_8cpp_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">CanIf.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/d5a/_can_if_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*-------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*                              Jens Raethe                                */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*                             www.tmaniac.de                              */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">/*-------------------------------------------------------------------------*/</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/d5a/_can_if_8h.html">CanIf.h</a>&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef HAL_CAN_MODULE_ENABLED</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * @todo</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * we need the STM HAL CAN module.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor"> #error &quot;The CanIf needs the STM CAN HAL module&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">extern</span>  <span class="keyword">const</span> <a class="code" href="../../d5/dc1/struct_can_config_type.html">CanConfigType</a> <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a1f5def24e64f1452409b758f2bf9b252">Can_NucleoConfig</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/* * @brief to use the generic name coming from the template */</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">extern</span> CAN_HandleTypeDef* <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a029d37783f55e2066e50c73fff77da80">ptr2Can1Hdl</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/* * @brief to use the generic name coming from the template */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">extern</span> CAN_HandleTypeDef* ptr2Can2Hdl;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> std::vector&lt;ECU_CanController&gt; <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a030b02bbbc7931554c760e416542c044">controllerList</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//const ECU_CanController controllerList[] = {ECU_CanController::CanMasterController,ECU_CanController::CanSlaveController};</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a1cf5fd5b362e9be0e49815a29aff5f9d">EXTERN_CONST</a>( <a class="code" href="../../dd/da5/struct_can_if___rx_pdu_cfg_type.html">CanIf_RxPduCfgType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) MyTest_RxPduConfig[];</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a1cf5fd5b362e9be0e49815a29aff5f9d">EXTERN_CONST</a>( <a class="code" href="../../dd/da5/struct_can_if___rx_pdu_cfg_type.html">CanIf_RxPduCfgType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) MyTest_TxPduConfig[];</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html">CAN_TxMessage</a>     canTxBuffer[<a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a>];</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;uint32_t testFilter = 3;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8cpp.html#a9a6da959889917683862a904925d9fda">   55</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html">CAN_TxMessage</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>)  <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a9a6da959889917683862a904925d9fda">cleanMessage</a> =</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da0acd345c19c6a30f356e243e0809a892">CanIf_TxMessage_free</a>,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="comment">/* StdID = */</span> 0x0,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="comment">/* ExtID = */</span> 0,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="comment">/* IDE = */</span>   CAN_ID_EXT,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="comment">/* RTR = */</span>   CAN_RTR_DATA,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">/* DLC = */</span>   0,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">/* TT_CAN */</span>  FunctionalState::DISABLE</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    },</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    0,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    { 0x00,0x00, 0xAF,0xFE, 0x00,0x00, 0x00,0x00}</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;};</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8cpp.html#a755646e6eb90158cbf7941723f6a156b">   73</a></span>&#160;<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html">CanIf_MessageType</a>     <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a755646e6eb90158cbf7941723f6a156b">rxMsgBuffer</a>[<a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#ga384b4522d7385ec4a82fa8f4694ca6a1">CANIF_RX_BUFFER_SIZE</a>];</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">   78</a></span>&#160;<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html">CanIf_RxBufferType</a> <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a> =</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    0,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    0,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a755646e6eb90158cbf7941723f6a156b">rxMsgBuffer</a></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;};</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">   87</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(<a class="code" href="../../d6/df4/class_can_if_upper_layer.html">CanIfUpperLayer</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">p2UpperLayerList</a>[<a class="code" href="../../d7/d66/group___t_m___can_if_cfg.html#ga441f342ee6cae3a029d66a6290e3de8e">CANIF_RXPDU_COUNT</a>];</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8cpp.html#ae72c5e8a32277ec9bf79078371e442e2">   90</a></span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#ae72c5e8a32277ec9bf79078371e442e2">SYS_FUNC</a>( <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a> ) <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#ga90b5c9821ab88ba86ffbdec37ebe3071">CanIfStates</a>&amp; operator++(<a class="code" href="../../d3/d86/group___t_m___can_if___main.html#ga90b5c9821ab88ba86ffbdec37ebe3071">CanIfStates</a>&amp; state)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">switch</span> (state)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a77136a4756a54c0e7b36fec7fbce0d22">CanIfStates::PreInit</a> : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14">CanIfStates::FilterInit</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14">CanIfStates::FilterInit</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ac23e2b09ebe6bf4cb5e2a9abe85c0be2">CanIfStates::Stopped</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;};</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#ae72c5e8a32277ec9bf79078371e442e2">SYS_FUNC</a>( <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a> ) <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#ga90b5c9821ab88ba86ffbdec37ebe3071">CanIfStates</a>&amp; operator--(<a class="code" href="../../d3/d86/group___t_m___can_if___main.html#ga90b5c9821ab88ba86ffbdec37ebe3071">CanIfStates</a>&amp; state)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">switch</span> (state)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14">CanIfStates::FilterInit</a> : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14">CanIfStates::FilterInit</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ac23e2b09ebe6bf4cb5e2a9abe85c0be2">CanIfStates::Stopped</a>  : <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14">CanIfStates::FilterInit</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> state= <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;};</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#ae72c5e8a32277ec9bf79078371e442e2">SYS_FUNC</a>( <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a> ) <a class="code" href="../../d0/d88/class_can_if.html#a9039e49a6b6758c9b86a6155af82eeca">CanIf::CanIf</a>() : <a class="code" href="../../da/d43/class_t_m_e___version_info.html">TME_VersionInfo</a>{<a class="code" href="../../d3/d86/group___t_m___can_if___main.html#ga273da582fa4fb57f121bcffe0fed4903">CANIF_MODULE_ID</a>, <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#ga691dd0ef12e4aa27534747d2e06293b0">CANIF_VERSION</a>, <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gadd502368ec6e8d59d09fa1b1f275b2df">CANIF_PATCH_VERSION</a>}, <a class="code" href="../../db/db1/class_com_if.html">ComIf</a>{ComInterfaceType::CanIf}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// TODO Auto-generated constructor stub</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// we leave the constructor with increment the state machine</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  ++state;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#ae72c5e8a32277ec9bf79078371e442e2">SYS_FUNC</a>( <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a> ) <a class="code" href="../../d0/d88/class_can_if.html#a799c9c3a6957ce91ddd4c88fa23057fa">CanIf::~CanIf</a>() {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// TODO Auto-generated destructor stub</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// this should never be seen outside</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> = <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a22981224d4ae3725235016230b969179">CanIfStates::ShutDown</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#gabc547b94aa9bc2325da04095ebb49edc">  132</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#gabc547b94aa9bc2325da04095ebb49edc">CanIf::Init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> == <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a> )</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">/*###############################################</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">     * start the HAL hardware driver</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">     ################################################*/</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="comment">/*## -1- Configure the CAN peripheral #######################################*/</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">//for ( C_ECU_CanController initController = C_CanMasterController ; initController &lt; C_NBROF_CanController; ++initController )</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; initController : <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a030b02bbbc7931554c760e416542c044">controllerList</a> )</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d76/struct_can_controller_para_type.html">CanControllerParaType</a> * ptr2CanParaConfigSet = &amp;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a1f5def24e64f1452409b758f2bf9b252">Can_NucleoConfig</a>.<a class="code" href="../../d5/dc1/struct_can_config_type.html#a4b120643bc82a8d72ee27534957eb850">ptr2CanParaConfigSet</a>[initController];</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d1/dc3/struct_can_controller_baudrate_config_type.html">CanControllerBaudrateConfigType</a>* ptr2BaudConfig = &amp;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a1f5def24e64f1452409b758f2bf9b252">Can_NucleoConfig</a>.<a class="code" href="../../d5/dc1/struct_can_config_type.html#a07405b5440b1b7f69d68e073ffb5f253">ptr2CanBaudrateConfigSet</a>[ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#a65aaebac86e5cb22eb536101acd4176b">InitBaudrate</a>];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> (ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#a65aaebac86e5cb22eb536101acd4176b">InitBaudrate</a> &lt; <a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga2cfa0fa70244f87ed6c1fb9a331ce091a2d496a99f2d68e3653fe861f562416bd">CanBaudrate_unknown</a>  )</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Instance                    = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#ae7ec62c3d1b0807e8ab45083441c8491">Instance</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.Mode                   = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#acd476e414243bb99ae0e6b924f755711">Mode</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.TimeTriggeredMode      = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#aa82df9c6c9addb15a82fc2cc1965469d">TTMode</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.AutoBusOff             = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#a9f3c93b4c5cd1ef3918d4c6663f74cc1">AutoBusOff</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.AutoWakeUp             = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#a980379d0ae81a8b7b9a3542f89ae1661">AutoWakeUp</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.AutoRetransmission     = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#a9f95073ab3fe7c65613defb323fed9c1">AutoRetransmission</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.ReceiveFifoLocked      = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#aa4489e65231861de02b05d5e43cf7714">ReceiveFifoLocked</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.TransmitFifoPriority   = ptr2CanParaConfigSet-&gt;<a class="code" href="../../dd/d76/struct_can_controller_para_type.html#a8dad52dd57f17b34281fb63937a50a48">TransmitFifoPriority</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.Prescaler              = ptr2BaudConfig-&gt;<a class="code" href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a430ecee27f912c452092b3e110c004c4">CanControllerPrescaler</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.SyncJumpWidth          = ptr2BaudConfig-&gt;<a class="code" href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a7c4bd20fb6790d4d15f1d0fd1ec8d999">CanControllerSyncJumpWidth</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.TimeSeg1               = ptr2BaudConfig-&gt;<a class="code" href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a08f8f31f8d9cb043a819cf946e9f25f1">CanControllerSeg1</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController].Init.TimeSeg2               = ptr2BaudConfig-&gt;<a class="code" href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a78adeba13d12265564077a39cfa8cbed">CanControllerSeg2</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> (HAL_CAN_Init(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[initController]) != HAL_OK)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          <a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> = <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          <a class="code" href="../../d4/d52/group___t_m___d_e_t___r_e_p_o_r_t.html#ga3444163456f77ac69ffc89fe15c01bd1">CANIF_DET_REPORTERROR</a>(<a class="code" href="../../dc/d8d/group___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s.html#ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872">E_INIT_FAILED</a>, <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga8d692fd91a6818f762f973c3bece6eec">CANIF_INIT_ID</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// do error handling</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> = <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;          <a class="code" href="../../d4/d52/group___t_m___d_e_t___r_e_p_o_r_t.html#ga3444163456f77ac69ffc89fe15c01bd1">CANIF_DET_REPORTERROR</a>(<a class="code" href="../../dc/d8d/group___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s.html#ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872">E_INIT_FAILED</a>, <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga8d692fd91a6818f762f973c3bece6eec">CANIF_INIT_ID</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">/*## -2- Start the CAN peripheral ###########################################*/</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">/* this must be changed on controllers with other CAN modules */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (HAL_CAN_Start(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>]) != HAL_OK)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="comment">/* Start Error */</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> = <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <a class="code" href="../../d4/d52/group___t_m___d_e_t___r_e_p_o_r_t.html#ga3444163456f77ac69ffc89fe15c01bd1">CANIF_DET_REPORTERROR</a>(<a class="code" href="../../dc/d8d/group___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s.html#ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872">E_INIT_FAILED</a>, <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga8d692fd91a6818f762f973c3bece6eec">CANIF_INIT_ID</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44a0ad17eee0054c5fe582b8c086433c9a0">CanSlaveController</a>].Instance != NULL )</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> (HAL_CAN_Start(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44a0ad17eee0054c5fe582b8c086433c9a0">CanSlaveController</a>]) != HAL_OK)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">/* Start Error */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> = <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../d4/d52/group___t_m___d_e_t___r_e_p_o_r_t.html#ga3444163456f77ac69ffc89fe15c01bd1">CANIF_DET_REPORTERROR</a>(<a class="code" href="../../dc/d8d/group___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s.html#ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872">E_INIT_FAILED</a>, <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga8d692fd91a6818f762f973c3bece6eec">CANIF_INIT_ID</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a029d37783f55e2066e50c73fff77da80">ptr2Can1Hdl</a> = &amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[0];</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    ptr2Can2Hdl = &amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[1];</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">/*## -3- Activate CAN RX notification #######################################*/</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (HAL_CAN_ActivateNotification(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>], CAN_IT_RX_FIFO0_MSG_PENDING) != HAL_OK)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="comment">/* Notification Error */</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="../../d4/d52/group___t_m___d_e_t___r_e_p_o_r_t.html#ga3444163456f77ac69ffc89fe15c01bd1">CANIF_DET_REPORTERROR</a>(<a class="code" href="../../dc/d8d/group___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s.html#ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872">E_INIT_FAILED</a>, <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga8d692fd91a6818f762f973c3bece6eec">CANIF_INIT_ID</a>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      ++<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    --<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">/*###############################################</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">   * init the real interface</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">   ################################################*/</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#if ( CANIF_LOAD_STATIC_CONFIG == STD_ON )</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> ( returnValue == <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a> ) <span class="comment">// HAL start was successful</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// init the Tx-Path</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a> InitPdu = 0; InitPdu &lt; CanIf_Tx_unknownPdu; InitPdu++ )</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">if</span> ( MyTest_TxPduConfig[InitPdu].CanId.IDE == <a class="code" href="../../dc/d40/group___t_m___can___types.html#ga6021131e64787aac72fbf947ebe27912">CANIF_EXTID</a> )</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[InitPdu].ExtId = MyTest_TxPduConfig[InitPdu].CanId.Id29bit;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[InitPdu].IDE = CAN_ID_EXT;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[InitPdu].StdId = MyTest_TxPduConfig[InitPdu].CanId.Id29bit;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[InitPdu].IDE = CAN_ID_STD;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[InitPdu].DLC = MyTest_TxPduConfig[InitPdu].MsgLength;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[InitPdu].RTR = MyTest_TxPduConfig[InitPdu].CanId.RTR;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// init rx path</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">//    VAR(CanIf_UpperLayerConnectType, AUTOMATIC) UL_Config;</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a> InitPdu = 0; InitPdu &lt; CanIf_Rx_unknownPdu; InitPdu++ )</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">//        UL_Config.PduId = MyTest_RxPduConfig[InitPdu].N_PDU_Name;</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">//        UL_Config.UpperLayer = MyTest_RxPduConfig[InitPdu].ULName;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">//        UL_Config.ptr2Storage = NULL_PTR;</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">if</span> ( MyTest_RxPduConfig[InitPdu].IdMask.Id29bit &gt; 0x0 )</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">//        CanIf_SetFilterByBitmask(</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//            MyTest_RxPduConfig[InitPdu].InstanceName,</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">//            MyTest_RxPduConfig[InitPdu].CanId,</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">//            MyTest_RxPduConfig[InitPdu].IdMask,</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">//            &amp;UL_Config);</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d0/d88/class_can_if.html#a316f1534150463336cf3c9cc0a9d50ba">SetFilterByBitmask</a>(</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;              MyTest_RxPduConfig[InitPdu].InstanceName,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;              MyTest_RxPduConfig[InitPdu].CanId,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;              MyTest_RxPduConfig[InitPdu].IdMask) &gt;= 0 )</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          <span class="comment">// do something on success</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">//        CanIf_SetFilterByCanId(</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">//            MyTest_RxPduConfig[InitPdu].InstanceName,</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">//            MyTest_RxPduConfig[InitPdu].CanId,</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">//            &amp;UL_Config);</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d0/d88/class_can_if.html#ab4dcac06d3eec530c2b273707e574447">SetFilterByCanId</a>(</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;              MyTest_RxPduConfig[InitPdu].InstanceName,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;              MyTest_RxPduConfig[InitPdu].CanId) &gt;= 0 )</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;          <span class="comment">// do something on success</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="preprocessor">#endif // ( CANIF_LOAD_STATIC_CONFIG == STD_ON )</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#gad2099414f45172dd20b2a1023d3baef3">  292</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#gad2099414f45172dd20b2a1023d3baef3">CanIf::Start</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  ++<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> == <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a> )</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// we keep the old state if we aren&#39;t ready</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    --<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga23dedfd9324e6d2ef2df8136c0bd473c">  310</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga9b738780c7f103ad66c2b24cf3805134">CanIf::Transmit</a>(</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) txPduId,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a1cbecab281ec270e3ae1f0fb71d02b16">P2CONST</a>(<a class="code" href="../../d7/d36/struct_com_stack___pdu_info_type.html">ComStack_PduInfoType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2PduInfo)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga9b738780c7f103ad66c2b24cf3805134">Transmit</a>((<a class="code" href="../../d7/d66/group___t_m___can_if_cfg.html#gad44163a8083a2ab035e8a006bbd120f1">CanIf_TxPduIdType</a>) txPduId, (<a class="code" href="../../dd/d54/struct_can_if___pdu_info_type.html">CanIf_PduInfoType</a>*) ptr2PduInfo);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">/* Requests transmission of a CAN message via message header and data array */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga36dd03ced66ee8dbafc6f6b3b3ccd0be">  318</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga9b738780c7f103ad66c2b24cf3805134">CanIf::Transmit</a>(</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html">ComStack_CanMsgHeader</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) msgHeader,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a1cbecab281ec270e3ae1f0fb71d02b16">P2CONST</a>(uint8_t, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2Data)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  uint32_t txBufferpos = 0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> == <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a> )</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// we need a empty message buffer box</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">for</span> (txBufferpos = 0; txBufferpos &lt; <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a>; txBufferpos++ )</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">if</span> ( canTxBuffer[txBufferpos].State == <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da0acd345c19c6a30f356e243e0809a892">CanIf_TxMessage_free</a> )</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9244da9a6028903f38895a4f9365370d">CanIf_TxMessage_write</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">if</span> ( msgHeader.CanId.IDE == <a class="code" href="../../dc/d40/group___t_m___can___types.html#ga6021131e64787aac72fbf947ebe27912">CANIF_EXTID</a> )</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.ExtId = msgHeader.CanId.Id29bit;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;          canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.IDE = CAN_ID_EXT;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.StdId = msgHeader.CanId.Id29bit;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;          canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.IDE = CAN_ID_STD;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.DLC = msgHeader.DLC;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.RTR = msgHeader.CanId.RTR;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">for</span> (uint8_t bPos = 0; bPos &lt; 8; bPos++)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          {canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#aff1fa9994513a1ee33424fa11988938f">Data</a>[bPos] = ptr2Data[bPos];}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9e72be8450b76c31522c858620019fcd">CanIf_TxMessage_rdy2tx</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        txBufferpos = <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a> + 1; <span class="comment">// -&gt; this breaks the search on the buffer</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">/* Requests transmission of a CAN message with PDU info. */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga9b738780c7f103ad66c2b24cf3805134">  359</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga9b738780c7f103ad66c2b24cf3805134">CanIf::Transmit</a>(</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../d7/d66/group___t_m___can_if_cfg.html#gad44163a8083a2ab035e8a006bbd120f1">CanIf_TxPduIdType</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) txPduId,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a1cbecab281ec270e3ae1f0fb71d02b16">P2CONST</a>(<a class="code" href="../../dd/d54/struct_can_if___pdu_info_type.html">CanIf_PduInfoType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2PduInfo)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  uint32_t TxBufferpos = 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> ReturnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">//  CAN_TxHeaderTypeDef   StmHeader;</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  uint8_t* ptr2Data = ptr2PduInfo-&gt;SduDataPtr;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordflow">if</span> ( txPduId &lt; CanIf_Tx_unknownPdu )</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> == <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a> )</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="comment">// we need a empty message buffer box</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">for</span> (TxBufferpos = 0; TxBufferpos &lt; <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a>; TxBufferpos++ )</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">if</span> ( canTxBuffer[TxBufferpos].State == <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da0acd345c19c6a30f356e243e0809a892">CanIf_TxMessage_free</a> )</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          canTxBuffer[TxBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9244da9a6028903f38895a4f9365370d">CanIf_TxMessage_write</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          canTxBuffer[TxBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a> = <a class="code" href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">txHeaderList</a>[txPduId];</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          canTxBuffer[TxBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>.DLC = ptr2PduInfo-&gt;SduLength;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;          <span class="comment">/* copy data bytes to tx buffer */</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;          <span class="keywordflow">for</span> (uint8_t bPos = 0; bPos &lt; 8; bPos++)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            {canTxBuffer[TxBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#aff1fa9994513a1ee33424fa11988938f">Data</a>[bPos] = ptr2Data[bPos];}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          canTxBuffer[TxBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9e72be8450b76c31522c858620019fcd">CanIf_TxMessage_rdy2tx</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          TxBufferpos = <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a> + 1; <span class="comment">// -&gt; this breaks the search on the buffer</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;          ReturnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">return</span> ReturnValue;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga6fe4e7514745fc2c58ab3a6736fa5277">  395</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga6b6faa51ed2dc5386ccaa4c6894fc732">CanIf::Receive</a>(</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) rxPduId,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(<a class="code" href="../../d7/d36/struct_com_stack___pdu_info_type.html">ComStack_PduInfoType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2PduInfo)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;{</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga6b6faa51ed2dc5386ccaa4c6894fc732">Receive</a>( (<a class="code" href="../../d7/d66/group___t_m___can_if_cfg.html#ga9e52c81c13b7f17073c598fadcaf8f0b">CanIf_RxPduIdType</a>) rxPduId, (<a class="code" href="../../dd/d54/struct_can_if___pdu_info_type.html">CanIf_PduInfoType</a>*) ptr2PduInfo);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">/* read a received message from buffer via CAN message header */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga4878f2a8cfa5c88e7f389e0aea652692">  404</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga6b6faa51ed2dc5386ccaa4c6894fc732">CanIf::Receive</a>(</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa9a6327c45717d66546d9222127c6201">REF2VAR</a>(<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html">ComStack_CanMsgHeader</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a> ) msgHeader,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(uint8_t, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2Data )</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 0 */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 0 */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">for</span> (uint32_t rxBufferpos = 0; (rxBufferpos &lt; <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#ga384b4522d7385ec4a82fa8f4694ca6a1">CANIF_RX_BUFFER_SIZE</a>) &amp;&amp; (returnValue == <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>); rxBufferpos++ )</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 1 */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 1 */</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> == <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a181adf25c09173bbd78d332cfb66b99f">CanIf_RxMessage_rdy2rd</a> )</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 2 */</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 2 */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a> requestCanId = msgHeader.CanId;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a> testCanId = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>.<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html#a26ccbe200baa63c451b1378125110844">CanId</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> ( CANIF_IS_CANID_EQUAL(requestCanId, testCanId) )</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532ac2f17b5a2583de3cbb3447b719d10fea">CanIf_RxMessage_read</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        msgHeader.DLC = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>.<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html#a6d61ee1cac8de69c504308e55b4bac78">DLC</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        msgHeader.Timestamp = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>.<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html#a1f926457c2a150e6a95b150b17e76415">Timestamp</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">for</span> ( uint8_t ByteCounter = 0; ByteCounter &lt; msgHeader.DLC; ByteCounter++)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          ptr2Data[ByteCounter] =  <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a6a3407615f16fcc520f54575fec85a6a">Data</a>[ByteCounter];</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;  <span class="comment">// -&gt; this breaks the search on the buffer</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a7385994669b08eb4310554c8ed2eb950">CanIf_RxMessage_rxok</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 3 */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 3 */</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 4 */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 4 */</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 5 */</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 5 */</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/* read a received message from buffer via PDU naming */</span></div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga6b6faa51ed2dc5386ccaa4c6894fc732">  458</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga6b6faa51ed2dc5386ccaa4c6894fc732">CanIf::Receive</a>(</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../d7/d66/group___t_m___can_if_cfg.html#ga9e52c81c13b7f17073c598fadcaf8f0b">CanIf_RxPduIdType</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) rxPduId,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(<a class="code" href="../../dd/d54/struct_can_if___pdu_info_type.html">CanIf_PduInfoType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2PduInfo)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 0 */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 0 */</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">for</span> (uint32_t rxBufferpos = 0; (rxBufferpos &lt; <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#ga384b4522d7385ec4a82fa8f4694ca6a1">CANIF_RX_BUFFER_SIZE</a>) &amp;&amp; (returnValue == <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>); rxBufferpos++ )</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 1 */</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 1 */</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> == <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a181adf25c09173bbd78d332cfb66b99f">CanIf_RxMessage_rdy2rd</a> )</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 2 */</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 2 */</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="comment">//ComStack_CanIdType requestCanId = rxHeaderList[rxPduId].CanId;</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a> requestCanId = MyTest_RxPduConfig[rxPduId].CanId;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a> testCanId = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>.<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html#a26ccbe200baa63c451b1378125110844">CanId</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">//if ( CANIF_IS_CANID_EQUAL(requestCanId, testCanId) )</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">if</span> ( requestCanId == testCanId ) <span class="comment">// we can use the &quot;new&quot; operator :-)</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532ac2f17b5a2583de3cbb3447b719d10fea">CanIf_RxMessage_read</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">if</span> ( ptr2PduInfo-&gt;SduLength &gt; <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>.<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html#a6d61ee1cac8de69c504308e55b4bac78">DLC</a>)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          <span class="comment">// der kleinere Wert bestimmt die Anzahl der zu lesenden Bytes</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          <span class="comment">// vielleicht sollten wir auch mit rxHeaderList[rxPduId].DLC überprüfen</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;          ptr2PduInfo-&gt;SduLength = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>.<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html#a6d61ee1cac8de69c504308e55b4bac78">DLC</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">/* todo vielleicht notwendig bei TT CAN</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">        ptr2PduInfo-&gt;Timestamp = canRxBuffer.ptr2MsgBuffer[rxBufferpos].CanIf_Header.Timestamp;</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">for</span> ( uint8_t ByteCounter = 0; ByteCounter &lt; ptr2PduInfo-&gt;SduLength; ByteCounter++)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          ptr2PduInfo-&gt;SduDataPtr[ByteCounter] =  <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a6a3407615f16fcc520f54575fec85a6a">Data</a>[ByteCounter];</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;  <span class="comment">// -&gt; this breaks the search on the buffer</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">//canRxBuffer.ptr2MsgBuffer[rxBufferpos].State = CanIf_RxMessage_rxok;</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[rxBufferpos].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a646c5e13d9c6e967553f589c74996eb7">CanIf_RxMessage_free</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 3 */</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 3 */</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 4 */</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 4 */</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">/* USER CODE BEGIN CanIf_Receive 5 */</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">/* USER CODE END CanIf_Receive 5 */</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/* to get the CanIf_RxPduIdType name */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#gaa1846ae4fda3195d5035a1e5b79aa6ac">  521</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#gaa1846ae4fda3195d5035a1e5b79aa6ac">CanIf::GetIfRxPduName</a>(</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../d3/d89/group___t_m___osi_layer3_lower_interface.html#ga9e9562e3c64dea55d05e8e8e9af08180">CanIf_UpperLayerType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) upperLayerName,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) rxPduId )</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a> ifRxPduId = ComStack_InvalidPdu;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a> InitPdu = 0; InitPdu &lt; CanIf_Rx_unknownPdu; InitPdu++ )</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> ( (MyTest_RxPduConfig[InitPdu].N_PDU_Name == rxPduId ) &amp;&amp; (MyTest_RxPduConfig[InitPdu].ULName == upperLayerName ) )</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      ifRxPduId = MyTest_RxPduConfig[InitPdu].L_PDU_Name;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">return</span> ifRxPduId;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/* to get the CanIf_TxPduIdType name */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#ga8b1e4c9082b4f0c7d7d365b9b19685ad">  537</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#ga8b1e4c9082b4f0c7d7d365b9b19685ad">CanIf::GetIfTxPduName</a>(</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../d3/d89/group___t_m___osi_layer3_lower_interface.html#ga9e9562e3c64dea55d05e8e8e9af08180">CanIf_UpperLayerType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) upperLayerName,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) txPduId )</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a> ifTxPduId = ComStack_InvalidPdu;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a> InitPdu = 0; InitPdu &lt; CanIf_Tx_unknownPdu; InitPdu++ )</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> ( (MyTest_TxPduConfig[InitPdu].N_PDU_Name == txPduId ) &amp;&amp; (MyTest_TxPduConfig[InitPdu].ULName == upperLayerName ) )</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      ifTxPduId = MyTest_TxPduConfig[InitPdu].L_PDU_Name;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">return</span> ifTxPduId;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="../../db/d0a/group___t_m___can_if___func.html#gac5e39f13562ff6edde6ba90877883d8f">  552</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../db/d0a/group___t_m___can_if___func.html#gac5e39f13562ff6edde6ba90877883d8f">CanIf::ConnectUpperLayerIndication</a>(</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a>(<a class="code" href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) rxPduId,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(<a class="code" href="../../d6/df4/class_can_if_upper_layer.html">CanIfUpperLayer</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) p2UpperLayerObject)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;{</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// maybe we should test the pointer</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// but a null-ptr is ok, because it will be used for disconnect the UpperLayerIndication</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">if</span> ( ( <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">p2UpperLayerList</a>[rxPduId] == <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a> ) || ( p2UpperLayerObject == <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a> ) )</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">p2UpperLayerList</a>[rxPduId] = p2UpperLayerObject;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="../../d0/d88/class_can_if.html#a3590424a0f79bebd2b1c00469229756c">  570</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<span class="keywordtype">void</span>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d0/d88/class_can_if.html#a3590424a0f79bebd2b1c00469229756c">CanIf::TxTask</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;{</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  uint32_t txBufferpos = 0;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">state</a> == <a class="code" href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a> )</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">for</span> (txBufferpos = 0; txBufferpos &lt; <a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a>; txBufferpos++ )</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> ( HAL_CAN_GetTxMailboxesFreeLevel(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>]) &gt; 0 )</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">switch</span> ( canTxBuffer[txBufferpos].State)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9e72be8450b76c31522c858620019fcd">CanIf_TxMessage_rdy2tx</a>:</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="comment">// we block for transmit</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da082c874aea4ff682cc99dc6931e27abe">CanIf_TxMessage_transmit</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="comment">// give the message via HAL to the CAN Controller</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <a class="code" href="../../d0/d88/class_can_if.html#ac0422a94bf7a32e882017f8ec3b6fdf6">canTxBufferMirror</a> = canTxBuffer[txBufferpos];</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="comment">//if ( HAL_CAN_AddTxMessage(&amp;bxCanHdl[CanMasterController], &amp;CanTxBuffer[TxBufferpos].Header, CanTxBuffer[TxBufferpos].Data, &amp;CanTxBuffer[TxBufferpos].Mailbox) != HAL_OK)</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span> ( HAL_CAN_AddTxMessage(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>], &amp;<a class="code" href="../../d0/d88/class_can_if.html#ac0422a94bf7a32e882017f8ec3b6fdf6">canTxBufferMirror</a>.<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">Header</a>, canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#aff1fa9994513a1ee33424fa11988938f">Data</a>, &amp;canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a58818083dff0e68b843d152a8e958a3d">Mailbox</a>) != HAL_OK)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;              canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da837d8648cb4a38a3206f3279bac367a0">CanIf_TxMessage_txerr</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;              Error_Handler();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da082c874aea4ff682cc99dc6931e27abe">CanIf_TxMessage_transmit</a>:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">if</span> ( !(HAL_CAN_IsTxMessagePending(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>], canTxBuffer[txBufferpos].Mailbox)) )</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;              canTxBuffer[txBufferpos].<a class="code" href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60dafb88ee206fcc116c6c60b9688ff9c1cd">CanIf_TxMessage_txok</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60dafb88ee206fcc116c6c60b9688ff9c1cd">CanIf_TxMessage_txok</a>:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keywordflow">if</span> ( 1  ) <span class="comment">// maybe we want to wait until clear up the mailbox</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;              canTxBuffer[txBufferpos] = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a9a6da959889917683862a904925d9fda">cleanMessage</a>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="comment">// nothing to do</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">/* to find a free CAN hardware filter */</span></div>
<div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="../../d0/d88/class_can_if.html#a5191e6da6723030adc9e16b27546cfa5">  618</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d0/d88/class_can_if.html#a5191e6da6723030adc9e16b27546cfa5">CanIf::FindFreeFilter</a>(</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(uint8_t, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2FilterBankNumber,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(uint8_t, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2FilterNumber,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(uint8_t, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2FilterMode)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;{</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a>(CAN_TypeDef, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) ptr2Instance = <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>].Instance;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  uint32_t filterBankRegValue = ptr2Instance-&gt;FA1R;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  uint32_t filterModeRegValue = ptr2Instance-&gt;FM1R;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">/* the STM HAL library has no function to find a free hardware filter</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">   * we test only for active filter */</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  uint8_t testBank = 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  uint8_t foundBank = <a class="code" href="../../d8/dd7/_t_m___platform___types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  uint8_t filterCounter = 0;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  uint8_t filterIncrement = 0;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">while</span> ((filterCounter &lt; <a class="code" href="../../d5/de5/group___t_m___can_cfg___general.html#ga711e6e05d77474f2fe85513d71dddd1d">CANIF_MAX_NUMBER_OF_FILTER</a>) &amp;&amp; (foundBank == <a class="code" href="../../d8/dd7/_t_m___platform___types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> ))</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    foundBank = 0x1 &amp; ~(filterBankRegValue&gt;&gt;testBank);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> ( (0x1 &amp; (filterModeRegValue&gt;&gt;testBank)) == CAN_FILTERMODE_IDLIST)</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      filterIncrement = 2;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="comment">// second filter inside a filter bank used as ID filter is free</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">if</span> ( (*ptr2FilterMode == CAN_FILTERMODE_IDLIST ) &amp;&amp;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;           (ptr2Instance-&gt;sFilterRegister[testBank].FR2 == 0xFFFFFFFF) )</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        foundBank = <a class="code" href="../../d8/dd7/_t_m___platform___types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        filterCounter++; <span class="comment">// single step when select a second filter</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"></span>        *ptr2FilterMode |= 0x80;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      filterIncrement = 1;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">if</span> (foundBank == <a class="code" href="../../d8/dd7/_t_m___platform___types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> )</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      testBank++;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      filterCounter += filterIncrement;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">else</span> <span class="comment">/* we have found a free filter */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      *ptr2FilterBankNumber = testBank;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      *ptr2FilterNumber = filterCounter;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">/* configure a free hardware filter using bit masking */</span></div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="../../d0/d88/class_can_if.html#a316f1534150463336cf3c9cc0a9d50ba">  676</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d0/d88/class_can_if.html#a316f1534150463336cf3c9cc0a9d50ba">CanIf::SetFilterByBitmask</a>(</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#ga70e0e5ae10d093bf26563e64ffd29c44">ECU_CanController</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) Controller,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) FilterId,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) FilterMask) <span class="comment">//,</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">//P2VAR(CanIf_UpperLayerConnectType, AUTOMATIC, AUTOMATIC) UL_Link )</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;{</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> ReturnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  CAN_FilterTypeDef  sFilterConfig;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  uint32_t StmFilterId = <a class="code" href="../../d0/d88/class_can_if.html#ac9e0d39e49a3f00e97a606c419eeb3ac">CanIdToHalFormat</a>(FilterId);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  uint32_t StmMaskId = <a class="code" href="../../d0/d88/class_can_if.html#ac9e0d39e49a3f00e97a606c419eeb3ac">CanIdToHalFormat</a>(FilterMask);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  uint8_t TempBank = 0;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  uint8_t TempNumber = 0;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  uint8_t TempMode = CAN_FILTERMODE_IDMASK;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="../../d0/d88/class_can_if.html#a5191e6da6723030adc9e16b27546cfa5">FindFreeFilter</a>(&amp;TempBank, &amp;TempNumber, &amp;TempMode) == <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a> )</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    sFilterConfig.FilterBank = TempBank;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> ( (TempMode &amp; 0x80) == 0x80 )</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="comment">/* this shouldn&#39;t happen here*/</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      Error_Handler();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    sFilterConfig.FilterMode = CAN_FILTERMODE_IDMASK;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    sFilterConfig.FilterScale = CAN_FILTERSCALE_32BIT;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    sFilterConfig.FilterIdHigh = ( 0xFFFF0000U &amp; StmFilterId) &gt;&gt; 16;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    sFilterConfig.FilterIdLow = (0x0000FFFFU &amp; StmFilterId);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    sFilterConfig.FilterMaskIdHigh = ( 0xFFFF0000U &amp; StmMaskId) &gt;&gt; 16;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    sFilterConfig.FilterMaskIdLow = ( 0x0000FFFFU &amp; StmMaskId);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    sFilterConfig.FilterFIFOAssignment = CAN_RX_FIFO0;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    sFilterConfig.FilterActivation = ENABLE;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (HAL_CAN_ConfigFilter(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>], &amp;sFilterConfig) != HAL_OK)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="comment">/* Filter configuration Error */</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      Error_Handler();</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">/* we save the pointer according to the Filter Number to fast access in the IRQ routine</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">     * the IRQ must test against the NULL_PTR */</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">//  ptr2FilterMailbox[TempNumber] = UL_Link-&gt;ptr2Storage;</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// connect ptr2Data and UpperLayer-Name with Filter number</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">//CanIfUpperLayer[TempNumber] = *UL_Link;</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">return</span> ReturnValue;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">/* configure a free hardware filter using single CAN Id filtering */</span></div>
<div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="../../d0/d88/class_can_if.html#ab4dcac06d3eec530c2b273707e574447">  727</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<span class="keywordtype">int</span>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d0/d88/class_can_if.html#ab4dcac06d3eec530c2b273707e574447">CanIf::SetFilterByCanId</a>(</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#ga70e0e5ae10d093bf26563e64ffd29c44">ECU_CanController</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) Controller,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) FilterId)<span class="comment">//,</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="comment">//P2VAR(CanIf_UpperLayerConnectType, AUTOMATIC, AUTOMATIC) UL_Link )</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;{</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordtype">int</span> returnValue = -<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  CAN_FilterTypeDef  sFilterConfig;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  uint32_t SaveFilterbank = 0;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  uint32_t StmFilterId = <a class="code" href="../../d0/d88/class_can_if.html#ac9e0d39e49a3f00e97a606c419eeb3ac">CanIdToHalFormat</a>(FilterId);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  uint8_t TempBank = 0;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  uint8_t TempNumber = 0;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  uint8_t TempMode = CAN_FILTERMODE_IDLIST;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="../../d0/d88/class_can_if.html#a5191e6da6723030adc9e16b27546cfa5">FindFreeFilter</a>(&amp;TempBank, &amp;TempNumber, &amp;TempMode) == <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a> )</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    sFilterConfig.FilterBank = TempBank;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">//    FilterId = CanIf_CanIdToHalFormat( FilterId) ;</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> ( (TempMode &amp; 0x80) == 0x80 ) <span class="comment">// the FindFreeFilter() func sets this bit to show second filter on bank</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      SaveFilterbank  = <a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>].Instance-&gt;sFilterRegister[TempBank].FR1;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      sFilterConfig.FilterMaskIdHigh = ( 0xFFFF0000U &amp; StmFilterId) &gt;&gt; 16;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      sFilterConfig.FilterMaskIdLow = ( 0x0000FFFFU &amp; StmFilterId);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      sFilterConfig.FilterIdHigh = ( 0xFFFF0000U &amp; SaveFilterbank) &gt;&gt; 16;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      sFilterConfig.FilterIdLow = (0x0000FFFFU &amp; SaveFilterbank);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      sFilterConfig.FilterIdHigh = ( 0xFFFF0000U &amp; StmFilterId) &gt;&gt; 16;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      sFilterConfig.FilterIdLow = (0x0000FFFFU &amp; StmFilterId);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      sFilterConfig.FilterMaskIdHigh = 0xFFFF; <span class="comment">// we prepare the mask register to reuse it with a second identifier</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      sFilterConfig.FilterMaskIdLow = 0xFFFF;  <span class="comment">// see above</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    sFilterConfig.FilterMode = CAN_FILTERMODE_IDLIST;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    sFilterConfig.FilterScale = CAN_FILTERSCALE_32BIT;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    sFilterConfig.FilterFIFOAssignment = CAN_RX_FIFO0;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    sFilterConfig.FilterActivation = ENABLE;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    sFilterConfig.SlaveStartFilterBank = 20;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (HAL_CAN_ConfigFilter(&amp;<a class="code" href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">bxCanHdl</a>[<a class="code" href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a>], &amp;sFilterConfig) != HAL_OK)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="comment">/* Filter configuration Error */</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      Error_Handler();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">/* we save the pointer according to the Filter Number to fast access in the IRQ routine</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">     * the IRQ must test against the NULL_PTR */</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; <span class="comment">//   ptr2FilterMailbox[TempNumber] = UL_Link-&gt;ptr2Storage;</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">// connect ptr2Data and UpperLayer-Name with Filter number</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">//    CanIfUpperLayer[TempNumber].UpperLayer = UL_Link-&gt;UpperLayer;</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">//    CanIfUpperLayer[TempNumber].ptr2Storage = UL_Link-&gt;ptr2Storage;</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">//    CanIfUpperLayer[TempNumber].PduId = UL_Link-&gt;PduId;</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">//CanIfUpperLayer[TempNumber] = *UL_Link;</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    returnValue = TempNumber;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">/* change the 32bit format to use with STM Registers */</span></div>
<div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="../../d0/d88/class_can_if.html#ac9e0d39e49a3f00e97a606c419eeb3ac">  785</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(uint32_t, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d0/d88/class_can_if.html#ac9e0d39e49a3f00e97a606c419eeb3ac">CanIf::CanIdToHalFormat</a>(</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a>(<a class="code" href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>) CanId)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="../../d7/d29/union_can_if___can_id_select_type.html">CanIf_CanIdSelectType</a> CatchBits;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  CatchBits.<a class="code" href="../../d7/d29/union_can_if___can_id_select_type.html#a06a2fac2df32cf81d40d40f902012e50">stm_ExtId</a>.<a class="code" href="../../d2/da0/struct_can_if___s_t_m___ext_can_id_type.html#ab4ec4249f98e06385a9fc0fb3d6aa44c">IDE</a> = CanId.IDE;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  CatchBits.<a class="code" href="../../d7/d29/union_can_if___can_id_select_type.html#a06a2fac2df32cf81d40d40f902012e50">stm_ExtId</a>.<a class="code" href="../../d2/da0/struct_can_if___s_t_m___ext_can_id_type.html#ae3be8e322c4de2414042ccfe1952bd20">RTR</a> = CanId.RTR;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (CanId.IDE == <a class="code" href="../../d8/dd7/_t_m___platform___types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> )</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    CatchBits.<a class="code" href="../../d7/d29/union_can_if___can_id_select_type.html#a06a2fac2df32cf81d40d40f902012e50">stm_ExtId</a>.<a class="code" href="../../d2/da0/struct_can_if___s_t_m___ext_can_id_type.html#a0066303705247d3474b928eabde0ebb6">Id29bit</a> = CanId.Id29bit;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    CatchBits.<a class="code" href="../../d7/d29/union_can_if___can_id_select_type.html#a3f52c68b73e075c7f0600251e0490280">stm_StdId</a>.<a class="code" href="../../d5/d54/struct_can_if___s_t_m___std_can_id_type.html#a9066fd61e41583815b0aa82ec4824a57">Id11bit</a> = (0x7FF &amp; CanId.Id29bit);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">return</span> CatchBits.<a class="code" href="../../d7/d29/union_can_if___can_id_select_type.html#af7da455d567222d7593f0dc89c2d3830">common</a>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8h.html#a27f064ffa1646e33eb391caf71161a12">  802</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a27f064ffa1646e33eb391caf71161a12">HalHeaderToCanIfHeader</a>(</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a4aae075cd720aee043ae21cd4438f391">REF2CONST</a>(CAN_RxHeaderTypeDef,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>)  rev2HAL_Header,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa9a6327c45717d66546d9222127c6201">REF2VAR</a>(<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html">ComStack_CanMsgHeader</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>)  rev2CanIfHeader )</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">/* remapping the CAN header */</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">if</span> ( rev2HAL_Header.IDE == CAN_ID_EXT )</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    rev2CanIfHeader.CanId.Id29bit  = rev2HAL_Header.ExtId;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    rev2CanIfHeader.CanId.IDE = <a class="code" href="../../dc/d40/group___t_m___can___types.html#ga6021131e64787aac72fbf947ebe27912">CANIF_EXTID</a>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    rev2CanIfHeader.CanId.Id29bit  = rev2HAL_Header.StdId;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  rev2CanIfHeader.CanId.RTR = rev2HAL_Header.RTR;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  rev2CanIfHeader.DLC = rev2HAL_Header.DLC;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  rev2CanIfHeader.Timestamp = rev2HAL_Header.Timestamp;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  rev2CanIfHeader.FilterMatchIndex = rev2HAL_Header.FilterMatchIndex;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">/* end of remapping */</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8h.html#a66aa86075291e668b039ac7cf2f1a9b5">  826</a></span>&#160;<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a>(<a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a>, <a class="code" href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a>) <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a66aa86075291e668b039ac7cf2f1a9b5">CanIfHeaderToHalHeader</a>(</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a4aae075cd720aee043ae21cd4438f391">REF2CONST</a>(<a class="code" href="../../d5/d65/struct_com_stack___can_msg_header.html">ComStack_CanMsgHeader</a>, <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>)  rev2CanIfHeader,</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="../../de/d2a/_t_m___compiler_8h.html#aa9a6327c45717d66546d9222127c6201">REF2VAR</a>(CAN_RxHeaderTypeDef,<a class="code" href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a>)  rev2HAL_Header )</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;{</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a> returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">/* remapping the CAN header */</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> ( rev2CanIfHeader.CanId.IDE == <a class="code" href="../../dc/d40/group___t_m___can___types.html#ga6021131e64787aac72fbf947ebe27912">CANIF_EXTID</a> )</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    rev2HAL_Header.ExtId = rev2CanIfHeader.CanId.Id29bit;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    rev2HAL_Header.IDE = CAN_ID_EXT;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    rev2HAL_Header.StdId = rev2CanIfHeader.CanId.Id29bit;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  rev2HAL_Header.RTR = rev2CanIfHeader.CanId.RTR;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  rev2HAL_Header.DLC = rev2CanIfHeader.DLC;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  rev2HAL_Header.Timestamp = rev2CanIfHeader.Timestamp;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  rev2HAL_Header.FilterMatchIndex = rev2CanIfHeader.FilterMatchIndex;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">/* end of remapping */</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  returnValue = <a class="code" href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">return</span> returnValue;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;}</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">/* #########################  interrupt callback function ############## */</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="../../d3/d5a/_can_if_8cpp.html#a6f49fb2d8fc7d9aff91e57ba77d38965">  854</a></span>&#160;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a6f49fb2d8fc7d9aff91e57ba77d38965">ISR_FUNC</a>( TM_CANIF_ISR_CODE) HAL_CAN_RxFifo0MsgPendingCallback(CAN_HandleTypeDef *hcan)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a> = 0;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">//  uint8_t* ptr2buf = NULL_PTR;</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">//  tm_PduIDType pduId = INVALID_PDUID;</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">//  CanIf_UpperLayerType CallUpperLayer = CanIfUL_undefined;</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">/* find free rx buffer place or take the last */</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">while</span> ( (<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> != <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a646c5e13d9c6e967553f589c74996eb7">CanIf_RxMessage_free</a> ) &amp;&amp; (<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>&lt; (<a class="code" href="../../d3/def/group___t_m___can_if___buffer_cfg.html#ga384b4522d7385ec4a82fa8f4694ca6a1">CANIF_RX_BUFFER_SIZE</a>-1) ))</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>++;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">State</a> = <a class="code" href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a181adf25c09173bbd78d332cfb66b99f">CanIf_RxMessage_rdy2rd</a>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">/* Get RX message */</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">if</span> ( HAL_CAN_GetRxMessage( hcan,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                             CAN_RX_FIFO0,</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                            &amp;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#a1f8c245f024965ef0966ecbb68acdee2">HAL_Header</a>,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                             <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a6a3407615f16fcc520f54575fec85a6a">Data</a> )        == HAL_OK )</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">//LED_BLUE_TOGGLE;</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="comment">/* remapping the CAN header */</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a27f064ffa1646e33eb391caf71161a12">HalHeaderToCanIfHeader</a>(<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#a1f8c245f024965ef0966ecbb68acdee2">HAL_Header</a>, <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>.<a class="code" href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">CanIf_Header</a>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment">/* Ziel ist es dass die Filternummer unmittelbar die RxIndication Funktion des dazu gehörigen Empfängers aufruft */</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment">/* Impelentation goal is this way: the filter number coming with the HAL_CAN_GetRxMessage inside the HAL_Header.FilterMatchIndex should be select the needed RxIndication function */</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    uint32_t filterIndex = <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#a1f8c245f024965ef0966ecbb68acdee2">HAL_Header</a>.FilterMatchIndex;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> ( filterIndex == testFilter )</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      LED_BLUE_TOGGLE;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> ( ( <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">p2UpperLayerList</a>[filterIndex] != <span class="keyword">nullptr</span> ) )</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <a class="code" href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">p2UpperLayerList</a>[filterIndex]-&gt;<a class="code" href="../../d6/df4/class_can_if_upper_layer.html#a0e7a83b5984f26eeefac934223a8a8cf">RxIndication</a>(MyTest_RxPduConfig[filterIndex].N_PDU_Name, &amp;<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">ptr2MsgBuffer</a>[<a class="code" href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a>.<a class="code" href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">BufWrPos</a>].<a class="code" href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">CanIf_Message</a>);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">//    for (ComStack_PduType searchPdu = 0; searchPdu &lt; CanIf_Rx_unknownPdu; searchPdu++ )</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">//    {</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">//      if ( (MyTest_RxPduConfig[searchPdu].CanId == canRxBuffer.ptr2MsgBuffer[canRxBuffer.BufWrPos].CanIf_Message.CanIf_Header.CanId ) &amp;&amp;</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">//          ( p2UpperLayerList[searchPdu] != nullptr ) )</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">//      {</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">//        p2UpperLayerList[searchPdu]-&gt;RxIndication(MyTest_RxPduConfig[searchPdu].L_PDU_Name, &amp;canRxBuffer.ptr2MsgBuffer[canRxBuffer.BufWrPos].CanIf_Message);</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_can_if_html_ab4dcac06d3eec530c2b273707e574447"><div class="ttname"><a href="../../d0/d88/class_can_if.html#ab4dcac06d3eec530c2b273707e574447">CanIf::SetFilterByCanId</a></div><div class="ttdeci">int SetFilterByCanId(ECU_CanController Controller, ComStack_CanIdType FilterId)</div><div class="ttdoc">configure a free hardware filter using single CAN Id filtering</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00727">CanIf.cpp:727</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a0d85e7055c0d224ada29474746b1fc39"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a0d85e7055c0d224ada29474746b1fc39">canRxBuffer</a></div><div class="ttdeci">CanIf_RxBufferType canRxBuffer</div><div class="ttdoc">the object to handle the RxBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00078">CanIf.cpp:78</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a530f11a96e508d171d28564c8dc20942"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a530f11a96e508d171d28564c8dc20942">NULL_PTR</a></div><div class="ttdeci">#define NULL_PTR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00045">TM_Compiler.h:45</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071a77136a4756a54c0e7b36fec7fbce0d22"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a77136a4756a54c0e7b36fec7fbce0d22">CanIfStates::PreInit</a></div></div>
<div class="ttc" id="agroup___t_m___d_e_t___r_e_p_o_r_t_html_ga3444163456f77ac69ffc89fe15c01bd1"><div class="ttname"><a href="../../d4/d52/group___t_m___d_e_t___r_e_p_o_r_t.html#ga3444163456f77ac69ffc89fe15c01bd1">CANIF_DET_REPORTERROR</a></div><div class="ttdeci">#define CANIF_DET_REPORTERROR(ErrorId, ApiId)</div><div class="ttdoc">Macro to report dev errors from CAN interface module.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00059">CanIf.h:59</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a976d68445c3d7763a2d3c4ece1d0af05"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a976d68445c3d7763a2d3c4ece1d0af05">CONST</a></div><div class="ttdeci">#define CONST(consttype, memclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00093">TM_Compiler.h:93</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_ga9b738780c7f103ad66c2b24cf3805134"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#ga9b738780c7f103ad66c2b24cf3805134">CanIf::Transmit</a></div><div class="ttdeci">Std_ReturnType Transmit(CanIf_TxPduIdType txPduId, const CanIf_PduInfoType *ptr2PduInfo)</div><div class="ttdoc">Requests transmission of a PDU using the Tx software Buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00359">CanIf.cpp:359</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a1cf5fd5b362e9be0e49815a29aff5f9d"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a1cf5fd5b362e9be0e49815a29aff5f9d">EXTERN_CONST</a></div><div class="ttdeci">EXTERN_CONST(CanIf_RxPduCfgType, AUTOMATIC) MyTest_RxPduConfig[]</div><div class="ttdoc">to access the configuration</div></div>
<div class="ttc" id="astructt_c_a_n___rx_message_html"><div class="ttname"><a href="../../db/d40/structt_c_a_n___rx_message.html">tCAN_RxMessage</a></div><div class="ttdoc">this is a test structure to hold data and header for a rx message</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00338">CanIf_Switch.h:338</a></div></div>
<div class="ttc" id="a_t_m___platform___types_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../d8/dd7/_t_m___platform___types_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd7/_t_m___platform___types_8h_source.html#l00068">TM_Platform_Types.h:68</a></div></div>
<div class="ttc" id="agroup___t_m___can_cfg___baud_cfg_html_gga2cfa0fa70244f87ed6c1fb9a331ce091a2d496a99f2d68e3653fe861f562416bd"><div class="ttname"><a href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga2cfa0fa70244f87ed6c1fb9a331ce091a2d496a99f2d68e3653fe861f562416bd">CanBaudrate_unknown</a></div><div class="ttdoc">symbolic name to end the list and for error handling</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/_can___cfg_8h_source.html#l00081">Can_Cfg.h:81</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gadd502368ec6e8d59d09fa1b1f275b2df"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gadd502368ec6e8d59d09fa1b1f275b2df">CANIF_PATCH_VERSION</a></div><div class="ttdeci">#define CANIF_PATCH_VERSION</div><div class="ttdoc">no patching until now todo use a generated value</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbd/_can_if___cfg_8h_source.html#l00053">CanIf_Cfg.h:53</a></div></div>
<div class="ttc" id="astructt_c_a_n___tx_message_html_a8aa285eae5b48d1cc30cebe1657a7dde"><div class="ttname"><a href="../../dd/d76/structt_c_a_n___tx_message.html#a8aa285eae5b48d1cc30cebe1657a7dde">tCAN_TxMessage::Header</a></div><div class="ttdeci">STM_HAL_TxHeaderTypeDef Header</div><div class="ttdoc">hold the header info</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00215">CanIf_Switch.h:215</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_gga7d72c75f884fc1bf3a1d61ac1d48b60da837d8648cb4a38a3206f3279bac367a0"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da837d8648cb4a38a3206f3279bac367a0">CanIf_TxMessage_txerr</a></div><div class="ttdoc">if the upper layer needs a callback we can handle a failed transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00171">CanIf_Switch.h:171</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___buffer_cfg_html_ga384b4522d7385ec4a82fa8f4694ca6a1"><div class="ttname"><a href="../../d3/def/group___t_m___can_if___buffer_cfg.html#ga384b4522d7385ec4a82fa8f4694ca6a1">CANIF_RX_BUFFER_SIZE</a></div><div class="ttdeci">#define CANIF_RX_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbd/_can_if___cfg_8h_source.html#l00071">CanIf_Cfg.h:71</a></div></div>
<div class="ttc" id="astruct_com_stack___can_message_type_html_a6a3407615f16fcc520f54575fec85a6a"><div class="ttname"><a href="../../d2/da8/struct_com_stack___can_message_type.html#a6a3407615f16fcc520f54575fec85a6a">ComStack_CanMessageType::Data</a></div><div class="ttdeci">uint8_t Data[8]</div><div class="ttdoc">CAN has 8 data bytes.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00077">TM_ComStack_Types.h:77</a></div></div>
<div class="ttc" id="astructt_c_a_n___tx_message_html"><div class="ttname"><a href="../../dd/d76/structt_c_a_n___tx_message.html">tCAN_TxMessage</a></div><div class="ttdoc">this is a test structure to hold data and header for a tx message</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00210">CanIf_Switch.h:210</a></div></div>
<div class="ttc" id="agroup___t_m___can_cfg___baud_cfg_html_ga70e0e5ae10d093bf26563e64ffd29c44"><div class="ttname"><a href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#ga70e0e5ae10d093bf26563e64ffd29c44">ECU_CanController</a></div><div class="ttdeci">ECU_CanController</div><div class="ttdoc">Names for the hardware CAN controller.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/_can___cfg_8h_source.html#l00085">Can_Cfg.h:85</a></div></div>
<div class="ttc" id="astruct_can_if___pdu_info_type_html"><div class="ttname"><a href="../../dd/d54/struct_can_if___pdu_info_type.html">CanIf_PduInfoType</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00301">CanIf_Switch.h:301</a></div></div>
<div class="ttc" id="aclass_can_if_upper_layer_html"><div class="ttname"><a href="../../d6/df4/class_can_if_upper_layer.html">CanIfUpperLayer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/df9/_can_if_upper_layer_8h_source.html#l00055">CanIfUpperLayer.h:55</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_a9f3c93b4c5cd1ef3918d4c6663f74cc1"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#a9f3c93b4c5cd1ef3918d4c6663f74cc1">CanControllerParaType::AutoBusOff</a></div><div class="ttdeci">FunctionalState AutoBusOff</div><div class="ttdoc">use auto bus off function</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00064">CanIf_Switch.h:64</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_acd476e414243bb99ae0e6b924f755711"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#acd476e414243bb99ae0e6b924f755711">CanControllerParaType::Mode</a></div><div class="ttdeci">uint32_t Mode</div><div class="ttdoc">setup the mode</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00060">CanIf_Switch.h:60</a></div></div>
<div class="ttc" id="astruct_com_stack___can_message_type_html_a477653ec17cac0270f5075fccd8b09e2"><div class="ttname"><a href="../../d2/da8/struct_com_stack___can_message_type.html#a477653ec17cac0270f5075fccd8b09e2">ComStack_CanMessageType::CanIf_Header</a></div><div class="ttdeci">ComStack_CanMsgHeader CanIf_Header</div><div class="ttdoc">The header of the CAN message.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00075">TM_ComStack_Types.h:75</a></div></div>
<div class="ttc" id="agroup___t_m___can_cfg___general_html_ga711e6e05d77474f2fe85513d71dddd1d"><div class="ttname"><a href="../../d5/de5/group___t_m___can_cfg___general.html#ga711e6e05d77474f2fe85513d71dddd1d">CANIF_MAX_NUMBER_OF_FILTER</a></div><div class="ttdeci">#define CANIF_MAX_NUMBER_OF_FILTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/_can___cfg_8h_source.html#l00056">Can_Cfg.h:56</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html">CanControllerParaType</a></div><div class="ttdoc">to hold the handling parameters</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00055">CanIf_Switch.h:55</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a029d37783f55e2066e50c73fff77da80"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a029d37783f55e2066e50c73fff77da80">ptr2Can1Hdl</a></div><div class="ttdeci">CAN_HandleTypeDef * ptr2Can1Hdl</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3f/_can_if___h_a_l_8c_source.html#l00046">CanIf_HAL.c:46</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_ga90b5c9821ab88ba86ffbdec37ebe3071"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#ga90b5c9821ab88ba86ffbdec37ebe3071">CanIfStates</a></div><div class="ttdeci">CanIfStates</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00076">CanIf.h:76</a></div></div>
<div class="ttc" id="agroup___t_m___osi_layer3_lower_interface_html_ga9e9562e3c64dea55d05e8e8e9af08180"><div class="ttname"><a href="../../d3/d89/group___t_m___osi_layer3_lower_interface.html#ga9e9562e3c64dea55d05e8e8e9af08180">CanIf_UpperLayerType</a></div><div class="ttdeci">CanIf_UpperLayerType</div><div class="ttdoc">to address the upper layer</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df9/_can_if_upper_layer_8h_source.html#l00025">CanIfUpperLayer.h:25</a></div></div>
<div class="ttc" id="a_t_m___com_stack___types_8h_html_a6034cd4ab5216664dab0a1f9710a82b5"><div class="ttname"><a href="../../dd/d4d/_t_m___com_stack___types_8h.html#a6034cd4ab5216664dab0a1f9710a82b5">ComStack_PduType</a></div><div class="ttdeci">uint32_t ComStack_PduType</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00021">TM_ComStack_Types.h:21</a></div></div>
<div class="ttc" id="astruct_com_stack___can_msg_header_html_a6d61ee1cac8de69c504308e55b4bac78"><div class="ttname"><a href="../../d5/d65/struct_com_stack___can_msg_header.html#a6d61ee1cac8de69c504308e55b4bac78">ComStack_CanMsgHeader::DLC</a></div><div class="ttdeci">uint32_t DLC</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00059">TM_ComStack_Types.h:59</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a1f5def24e64f1452409b758f2bf9b252"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a1f5def24e64f1452409b758f2bf9b252">Can_NucleoConfig</a></div><div class="ttdeci">const CanConfigType Can_NucleoConfig</div><div class="ttdoc">This is the configuration for the STM Nulceo144 board.</div></div>
<div class="ttc" id="astruct_can_controller_baudrate_config_type_html_a7c4bd20fb6790d4d15f1d0fd1ec8d999"><div class="ttname"><a href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a7c4bd20fb6790d4d15f1d0fd1ec8d999">CanControllerBaudrateConfigType::CanControllerSyncJumpWidth</a></div><div class="ttdeci">uint32_t CanControllerSyncJumpWidth</div><div class="ttdoc">Specifies the synchronization jump width for the controller in time quantas</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00107">CanIf_Switch.h:107</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_aa82df9c6c9addb15a82fc2cc1965469d"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#aa82df9c6c9addb15a82fc2cc1965469d">CanControllerParaType::TTMode</a></div><div class="ttdeci">FunctionalState TTMode</div><div class="ttdoc">use time triggered mode</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00062">CanIf_Switch.h:62</a></div></div>
<div class="ttc" id="astructt_c_a_n___tx_message_html_a47024183ebc64015e88ce136ab57f989"><div class="ttname"><a href="../../dd/d76/structt_c_a_n___tx_message.html#a47024183ebc64015e88ce136ab57f989">tCAN_TxMessage::State</a></div><div class="ttdeci">CanIf_TxMessageStateType State</div><div class="ttdoc">current state of this TxMessage</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00213">CanIf_Switch.h:213</a></div></div>
<div class="ttc" id="astruct_can_config_type_html_a4b120643bc82a8d72ee27534957eb850"><div class="ttname"><a href="../../d5/dc1/struct_can_config_type.html#a4b120643bc82a8d72ee27534957eb850">CanConfigType::ptr2CanParaConfigSet</a></div><div class="ttdeci">const CanControllerParaType * ptr2CanParaConfigSet</div><div class="ttdoc">Pointer to the parameter configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00141">CanIf_Switch.h:141</a></div></div>
<div class="ttc" id="astruct_can_config_type_html_a07405b5440b1b7f69d68e073ffb5f253"><div class="ttname"><a href="../../d5/dc1/struct_can_config_type.html#a07405b5440b1b7f69d68e073ffb5f253">CanConfigType::ptr2CanBaudrateConfigSet</a></div><div class="ttdeci">const CanControllerBaudrateConfigType * ptr2CanBaudrateConfigSet</div><div class="ttdoc">Pointer to the baudrate configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00137">CanIf_Switch.h:137</a></div></div>
<div class="ttc" id="aclass_t_m_e___version_info_html"><div class="ttname"><a href="../../da/d43/class_t_m_e___version_info.html">TME_VersionInfo</a></div><div class="ttdoc">to hold the version info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d8b/_t_m_e_version_info_8h_source.html#l00024">TMEVersionInfo.h:24</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_ga8b1e4c9082b4f0c7d7d365b9b19685ad"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#ga8b1e4c9082b4f0c7d7d365b9b19685ad">CanIf::GetIfTxPduName</a></div><div class="ttdeci">ComStack_PduType GetIfTxPduName(CanIf_UpperLayerType upperLayerName, ComStack_PduType txPduId)</div><div class="ttdoc">to get the CanIf_TxPduIdType name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00537">CanIf.cpp:537</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a1cbecab281ec270e3ae1f0fb71d02b16"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a1cbecab281ec270e3ae1f0fb71d02b16">P2CONST</a></div><div class="ttdeci">#define P2CONST(ptrtype, memclass, ptrclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00075">TM_Compiler.h:75</a></div></div>
<div class="ttc" id="astruct_can_if___s_t_m___ext_can_id_type_html_a0066303705247d3474b928eabde0ebb6"><div class="ttname"><a href="../../d2/da0/struct_can_if___s_t_m___ext_can_id_type.html#a0066303705247d3474b928eabde0ebb6">CanIf_STM_ExtCanIdType::Id29bit</a></div><div class="ttdeci">uint32_t Id29bit</div><div class="ttdoc">extended Id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00256">CanIf_Switch.h:256</a></div></div>
<div class="ttc" id="astruct_can_if___rx_pdu_cfg_type_html"><div class="ttname"><a href="../../dd/da5/struct_can_if___rx_pdu_cfg_type.html">CanIf_RxPduCfgType</a></div><div class="ttdoc">to hold the configuration of a RxPdu</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00316">CanIf_Switch.h:316</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_ga691dd0ef12e4aa27534747d2e06293b0"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#ga691dd0ef12e4aa27534747d2e06293b0">CANIF_VERSION</a></div><div class="ttdeci">#define CANIF_VERSION</div><div class="ttdoc">we have only one version at start todo use a generated value</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbd/_can_if___cfg_8h_source.html#l00050">CanIf_Cfg.h:50</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_ae72c5e8a32277ec9bf79078371e442e2"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#ae72c5e8a32277ec9bf79078371e442e2">SYS_FUNC</a></div><div class="ttdeci">SYS_FUNC(TM_CANIF_CODE) CanIfStates &amp;operator++(CanIfStates &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00090">CanIf.cpp:90</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_gga7d72c75f884fc1bf3a1d61ac1d48b60da082c874aea4ff682cc99dc6931e27abe"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da082c874aea4ff682cc99dc6931e27abe">CanIf_TxMessage_transmit</a></div><div class="ttdoc">the Tx Message is blocked for transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00167">CanIf_Switch.h:167</a></div></div>
<div class="ttc" id="aclass_com_if_html"><div class="ttname"><a href="../../db/db1/class_com_if.html">ComIf</a></div><div class="ttdoc">the base class to hold a unique interface to all communication controller interface types</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d8c/_com_if_8h_source.html#l00066">ComIf.h:66</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_aa9a6327c45717d66546d9222127c6201"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#aa9a6327c45717d66546d9222127c6201">REF2VAR</a></div><div class="ttdeci">#define REF2VAR(reftype, memclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00068">TM_Compiler.h:68</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_a8dad52dd57f17b34281fb63937a50a48"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#a8dad52dd57f17b34281fb63937a50a48">CanControllerParaType::TransmitFifoPriority</a></div><div class="ttdeci">FunctionalState TransmitFifoPriority</div><div class="ttdoc">switch internal time based transmission priority on</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00072">CanIf_Switch.h:72</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a6f49fb2d8fc7d9aff91e57ba77d38965"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a6f49fb2d8fc7d9aff91e57ba77d38965">ISR_FUNC</a></div><div class="ttdeci">ISR_FUNC(TM_CANIF_ISR_CODE) HAL_CAN_RxFifo0MsgPendingCallback(CAN_HandleTypeDef *hcan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00854">CanIf.cpp:854</a></div></div>
<div class="ttc" id="aclass_can_if_html_a316f1534150463336cf3c9cc0a9d50ba"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a316f1534150463336cf3c9cc0a9d50ba">CanIf::SetFilterByBitmask</a></div><div class="ttdeci">Std_ReturnType SetFilterByBitmask(ECU_CanController Controller, ComStack_CanIdType FilterId, ComStack_CanIdType FilterMask)</div><div class="ttdoc">configure a free hardware filter using bit masking</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00676">CanIf.cpp:676</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a44fc42ed93abd1afe9c2268543bc8faf"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a44fc42ed93abd1afe9c2268543bc8faf">VAR</a></div><div class="ttdeci">#define VAR(vartype, memclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00099">TM_Compiler.h:99</a></div></div>
<div class="ttc" id="astruct_can_if___s_t_m___std_can_id_type_html_a9066fd61e41583815b0aa82ec4824a57"><div class="ttname"><a href="../../d5/d54/struct_can_if___s_t_m___std_can_id_type.html#a9066fd61e41583815b0aa82ec4824a57">CanIf_STM_StdCanIdType::Id11bit</a></div><div class="ttdeci">uint32_t Id11bit</div><div class="ttdoc">Standard Id.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00243">CanIf_Switch.h:243</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a4aae075cd720aee043ae21cd4438f391"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a4aae075cd720aee043ae21cd4438f391">REF2CONST</a></div><div class="ttdeci">#define REF2CONST(reftype, memclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00071">TM_Compiler.h:71</a></div></div>
<div class="ttc" id="astructt_c_a_n___rx_message_html_a1f8c245f024965ef0966ecbb68acdee2"><div class="ttname"><a href="../../db/d40/structt_c_a_n___rx_message.html#a1f8c245f024965ef0966ecbb68acdee2">tCAN_RxMessage::HAL_Header</a></div><div class="ttdeci">STM_HAL_RxHeaderTypeDef HAL_Header</div><div class="ttdoc">DON'T USE: The Header used by STM inside the HAL.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00349">CanIf_Switch.h:349</a></div></div>
<div class="ttc" id="astructt_c_a_n___tx_message_html_aff1fa9994513a1ee33424fa11988938f"><div class="ttname"><a href="../../dd/d76/structt_c_a_n___tx_message.html#aff1fa9994513a1ee33424fa11988938f">tCAN_TxMessage::Data</a></div><div class="ttdeci">uint8_t Data[8]</div><div class="ttdoc">hold the data</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00219">CanIf_Switch.h:219</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_gga7d72c75f884fc1bf3a1d61ac1d48b60da9244da9a6028903f38895a4f9365370d"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9244da9a6028903f38895a4f9365370d">CanIf_TxMessage_write</a></div><div class="ttdoc">the Tx Message is blocked to write</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00163">CanIf_Switch.h:163</a></div></div>
<div class="ttc" id="aclass_can_if_upper_layer_html_a0e7a83b5984f26eeefac934223a8a8cf"><div class="ttname"><a href="../../d6/df4/class_can_if_upper_layer.html#a0e7a83b5984f26eeefac934223a8a8cf">CanIfUpperLayer::RxIndication</a></div><div class="ttdeci">virtual Std_ReturnType RxIndication(ComStack_PduType rxPduId, const ComStack_CanMessageType *ptr2Sdu)</div><div class="ttdoc">virtual function declaration to have an indication function in all upper layer classes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df9/_can_if_upper_layer_8h_source.html#l00063">CanIfUpperLayer.h:63</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_gaa1846ae4fda3195d5035a1e5b79aa6ac"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#gaa1846ae4fda3195d5035a1e5b79aa6ac">CanIf::GetIfRxPduName</a></div><div class="ttdeci">ComStack_PduType GetIfRxPduName(CanIf_UpperLayerType upperLayerName, ComStack_PduType rxPduId)</div><div class="ttdoc">to get the CanIf_RxPduIdType name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00521">CanIf.cpp:521</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_aa8f07207960a32e918e08a0faf697977"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#aa8f07207960a32e918e08a0faf697977">FUNC</a></div><div class="ttdeci">#define FUNC(rettype, memclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00054">TM_Compiler.h:54</a></div></div>
<div class="ttc" id="aclass_can_if_html_a9039e49a6b6758c9b86a6155af82eeca"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a9039e49a6b6758c9b86a6155af82eeca">CanIf::CanIf</a></div><div class="ttdeci">CanIf()</div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_ggaff3f3b940bfe6523237fdac053b76532a646c5e13d9c6e967553f589c74996eb7"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a646c5e13d9c6e967553f589c74996eb7">CanIf_RxMessage_free</a></div><div class="ttdoc">the Rx Message is free for use</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00180">CanIf_Switch.h:180</a></div></div>
<div class="ttc" id="aclass_can_if_html_a799c9c3a6957ce91ddd4c88fa23057fa"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a799c9c3a6957ce91ddd4c88fa23057fa">CanIf::~CanIf</a></div><div class="ttdeci">~CanIf()</div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_ga8d692fd91a6818f762f973c3bece6eec"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#ga8d692fd91a6818f762f973c3bece6eec">CANIF_INIT_ID</a></div><div class="ttdeci">#define CANIF_INIT_ID</div><div class="ttdoc">service ID of CanIf::Init()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00147">CanIf.h:147</a></div></div>
<div class="ttc" id="a_can_if_8h_html"><div class="ttname"><a href="../../d3/d5a/_can_if_8h.html">CanIf.h</a></div></div>
<div class="ttc" id="aclass_can_if_html_aacdc5a59eb6386a4723cf41844e80155"><div class="ttname"><a href="../../d0/d88/class_can_if.html#aacdc5a59eb6386a4723cf41844e80155">CanIf::txHeaderList</a></div><div class="ttdeci">STM_HAL_TxHeaderTypeDef txHeaderList[CANIF_TXPDU_COUNT]</div><div class="ttdoc">We create a list with CAN message headers for fast access sorted by the CanIf_txPduIdType.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00336">CanIf.h:336</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a030b02bbbc7931554c760e416542c044"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a030b02bbbc7931554c760e416542c044">controllerList</a></div><div class="ttdeci">const std::vector&lt; ECU_CanController &gt; controllerList</div></div>
<div class="ttc" id="a_t_m___std___types_8h_html_a1e7cc741c56207a8872ea58373276925"><div class="ttname"><a href="../../d0/dcc/_t_m___std___types_8h.html#a1e7cc741c56207a8872ea58373276925">E_OK</a></div><div class="ttdeci">#define E_OK</div><div class="ttdoc">function could do the shop</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcc/_t_m___std___types_8h_source.html#l00039">TM_Std_Types.h:39</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ae7d31fc0602fb2ede144d18cdffd816b">CanIfStates::Ready</a></div></div>
<div class="ttc" id="aunion_can_if___can_id_select_type_html"><div class="ttname"><a href="../../d7/d29/union_can_if___can_id_select_type.html">CanIf_CanIdSelectType</a></div><div class="ttdoc">to unify to handle the CAN Id formats</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00286">CanIf_Switch.h:286</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_a9f95073ab3fe7c65613defb323fed9c1"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#a9f95073ab3fe7c65613defb323fed9c1">CanControllerParaType::AutoRetransmission</a></div><div class="ttdeci">FunctionalState AutoRetransmission</div><div class="ttdoc">use auto retransmission</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00068">CanIf_Switch.h:68</a></div></div>
<div class="ttc" id="a_can_if___compiler___cfg_8h_html_ac124f5bce130e163910d67b45bf1fedb"><div class="ttname"><a href="../../d2/dc3/_can_if___compiler___cfg_8h.html#ac124f5bce130e163910d67b45bf1fedb">TM_CANIF_CODE</a></div><div class="ttdeci">#define TM_CANIF_CODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/_can_if___compiler___cfg_8h_source.html#l00034">CanIf_Compiler_Cfg.h:34</a></div></div>
<div class="ttc" id="astruct_can_controller_baudrate_config_type_html"><div class="ttname"><a href="../../d1/dc3/struct_can_controller_baudrate_config_type.html">CanControllerBaudrateConfigType</a></div><div class="ttdoc">Configuration parameters for a baudrate setting.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00084">CanIf_Switch.h:84</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_gga7d72c75f884fc1bf3a1d61ac1d48b60dafb88ee206fcc116c6c60b9688ff9c1cd"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60dafb88ee206fcc116c6c60b9688ff9c1cd">CanIf_TxMessage_txok</a></div><div class="ttdoc">if the upper layer needs a callback we can handle a ok transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00169">CanIf_Switch.h:169</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a83162722a9ee0ea14383065a180f1af4">CanIfStates::ErrorState</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_ggaff3f3b940bfe6523237fdac053b76532ac2f17b5a2583de3cbb3447b719d10fea"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532ac2f17b5a2583de3cbb3447b719d10fea">CanIf_RxMessage_read</a></div><div class="ttdoc">the Rx Message is blocked for transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00186">CanIf_Switch.h:186</a></div></div>
<div class="ttc" id="astruct_com_stack___can_msg_header_html"><div class="ttname"><a href="../../d5/d65/struct_com_stack___can_msg_header.html">ComStack_CanMsgHeader</a></div><div class="ttdoc">upper layer can use a smaller CAN message header</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00055">TM_ComStack_Types.h:55</a></div></div>
<div class="ttc" id="agroup___t_m___can_cfg___baud_cfg_html_gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab"><div class="ttname"><a href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44aaafa9ee6df71a175d92e6235bd5e5aab">CanMasterController</a></div><div class="ttdoc">ST named the first controller Master because of the &quot;Master configuration&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/_can___cfg_8h_source.html#l00087">Can_Cfg.h:87</a></div></div>
<div class="ttc" id="astructt_c_a_n___tx_message_html_a58818083dff0e68b843d152a8e958a3d"><div class="ttname"><a href="../../dd/d76/structt_c_a_n___tx_message.html#a58818083dff0e68b843d152a8e958a3d">tCAN_TxMessage::Mailbox</a></div><div class="ttdeci">uint32_t Mailbox</div><div class="ttdoc">the transmit function returns the HW mailbox if we need it</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00217">CanIf_Switch.h:217</a></div></div>
<div class="ttc" id="astruct_com_stack___can_id_type_html"><div class="ttname"><a href="../../de/d22/struct_com_stack___can_id_type.html">ComStack_CanIdType</a></div><div class="ttdoc">to use the 32bit for extended CAN Id</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00032">TM_ComStack_Types.h:32</a></div></div>
<div class="ttc" id="astruct_can_if___s_t_m___ext_can_id_type_html_ae3be8e322c4de2414042ccfe1952bd20"><div class="ttname"><a href="../../d2/da0/struct_can_if___s_t_m___ext_can_id_type.html#ae3be8e322c4de2414042ccfe1952bd20">CanIf_STM_ExtCanIdType::RTR</a></div><div class="ttdeci">uint32_t RTR</div><div class="ttdoc">Remote transmission request.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00252">CanIf_Switch.h:252</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_gad2099414f45172dd20b2a1023d3baef3"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#gad2099414f45172dd20b2a1023d3baef3">CanIf::Start</a></div><div class="ttdeci">Std_ReturnType Start(void)</div><div class="ttdoc">all init of the CanIf module is done</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00292">CanIf.cpp:292</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a5c6ccc28154ea2a7874ba567a352e009"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a5c6ccc28154ea2a7874ba567a352e009">P2VAR</a></div><div class="ttdeci">#define P2VAR(ptrtype, memclass, ptrclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00065">TM_Compiler.h:65</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_gabc547b94aa9bc2325da04095ebb49edc"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#gabc547b94aa9bc2325da04095ebb49edc">CanIf::Init</a></div><div class="ttdeci">Std_ReturnType Init(void)</div><div class="ttdoc">init of the CanIf module</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00132">CanIf.cpp:132</a></div></div>
<div class="ttc" id="agroup___t_m___can___types_html_ga6021131e64787aac72fbf947ebe27912"><div class="ttname"><a href="../../dc/d40/group___t_m___can___types.html#ga6021131e64787aac72fbf947ebe27912">CANIF_EXTID</a></div><div class="ttdeci">#define CANIF_EXTID</div><div class="ttdoc">use extended CAN ID</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00034">CanIf_Switch.h:34</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071a22981224d4ae3725235016230b969179"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071a22981224d4ae3725235016230b969179">CanIfStates::ShutDown</a></div></div>
<div class="ttc" id="astruct_com_stack___pdu_info_type_html"><div class="ttname"><a href="../../d7/d36/struct_com_stack___pdu_info_type.html">ComStack_PduInfoType</a></div><div class="ttdoc">The type to handle PDUs on the ComStack.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00086">TM_ComStack_Types.h:86</a></div></div>
<div class="ttc" id="a_t_m___std___types_8h_html_a998b1392c75c4079d9ebcf00f506abfd"><div class="ttname"><a href="../../d0/dcc/_t_m___std___types_8h.html#a998b1392c75c4079d9ebcf00f506abfd">Std_ReturnType</a></div><div class="ttdeci">tm_sint16 Std_ReturnType</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcc/_t_m___std___types_8h_source.html#l00030">TM_Std_Types.h:30</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_a65aaebac86e5cb22eb536101acd4176b"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#a65aaebac86e5cb22eb536101acd4176b">CanControllerParaType::InitBaudrate</a></div><div class="ttdeci">CanControllerBaudRateConfigID InitBaudrate</div><div class="ttdoc">initial Baudrate</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00074">CanIf_Switch.h:74</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a6a96170903dac49d09d50016bcef44b1"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a6a96170903dac49d09d50016bcef44b1">p2UpperLayerList</a></div><div class="ttdeci">const CanIfUpperLayer * p2UpperLayerList[CANIF_RXPDU_COUNT]</div><div class="ttdoc">this list will hold the pointer to the upper layers in same order like the rxHeaderList</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00087">CanIf.cpp:87</a></div></div>
<div class="ttc" id="agroup___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s_html_ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872"><div class="ttname"><a href="../../dc/d8d/group___t_m___d_e_t___c_a_n_i_f___n_a_m_e_s.html#ggad2acfcd95bfed0494ff07694df6c5c21af57c8b769b855b40d828e9281a32d872">CanIf_DevError::E_INIT_FAILED</a></div><div class="ttdoc">Module initialization has failed.</div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_gga7d72c75f884fc1bf3a1d61ac1d48b60da9e72be8450b76c31522c858620019fcd"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da9e72be8450b76c31522c858620019fcd">CanIf_TxMessage_rdy2tx</a></div><div class="ttdoc">the Tx Message is ready for transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00165">CanIf_Switch.h:165</a></div></div>
<div class="ttc" id="aclass_can_if_html_a544d66ab93895a79d57473dd5388eea1"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a544d66ab93895a79d57473dd5388eea1">CanIf::bxCanHdl</a></div><div class="ttdeci">CAN_HandleTypeDef bxCanHdl[2]</div><div class="ttdoc">we need a handle to hold the information for the bxCAN controller</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00327">CanIf.h:327</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a755646e6eb90158cbf7941723f6a156b"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a755646e6eb90158cbf7941723f6a156b">rxMsgBuffer</a></div><div class="ttdeci">CanIf_MessageType rxMsgBuffer[CANIF_RX_BUFFER_SIZE]</div><div class="ttdoc">we want a Rx software buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00073">CanIf.cpp:73</a></div></div>
<div class="ttc" id="a_t_m___compiler_8h_html_a3851a1a8ddec9eacd2e30a8a19bb8cc8"><div class="ttname"><a href="../../de/d2a/_t_m___compiler_8h.html#a3851a1a8ddec9eacd2e30a8a19bb8cc8">AUTOMATIC</a></div><div class="ttdeci">#define AUTOMATIC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2a/_t_m___compiler_8h_source.html#l00029">TM_Compiler.h:29</a></div></div>
<div class="ttc" id="astructt_c_a_n___rx_message_html_abdae256a90ebc967f22cd685f2b65ed8"><div class="ttname"><a href="../../db/d40/structt_c_a_n___rx_message.html#abdae256a90ebc967f22cd685f2b65ed8">tCAN_RxMessage::CanIf_Message</a></div><div class="ttdeci">ComStack_CanMessageType CanIf_Message</div><div class="ttdoc">The header of the CAN message.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00344">CanIf_Switch.h:344</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071aa645f9d227d88da3d8ed7042f29f15f3">CanIfStates::HwInit</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_ae7ec62c3d1b0807e8ab45083441c8491"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#ae7ec62c3d1b0807e8ab45083441c8491">CanControllerParaType::Instance</a></div><div class="ttdeci">const CAN_TypeDef * Instance</div><div class="ttdoc">hold the pointer to the hardware instance registers</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00058">CanIf_Switch.h:58</a></div></div>
<div class="ttc" id="a_t_m___std___types_8h_html_a1d155fa7a571f569a380bb42b1947eb4"><div class="ttname"><a href="../../d0/dcc/_t_m___std___types_8h.html#a1d155fa7a571f569a380bb42b1947eb4">E_NOT_OK</a></div><div class="ttdeci">#define E_NOT_OK</div><div class="ttdoc">function failed</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dcc/_t_m___std___types_8h_source.html#l00045">TM_Std_Types.h:45</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ab70139410ab2739fae5136b8f6b42f14">CanIfStates::FilterInit</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a9a6da959889917683862a904925d9fda"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a9a6da959889917683862a904925d9fda">cleanMessage</a></div><div class="ttdeci">CAN_TxMessage cleanMessage</div><div class="ttdoc">we use a clean message</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00055">CanIf.cpp:55</a></div></div>
<div class="ttc" id="astruct_can_controller_baudrate_config_type_html_a430ecee27f912c452092b3e110c004c4"><div class="ttname"><a href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a430ecee27f912c452092b3e110c004c4">CanControllerBaudrateConfigType::CanControllerPrescaler</a></div><div class="ttdeci">uint32_t CanControllerPrescaler</div><div class="ttdoc">Specifies propagation delay in time quantas.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00094">CanIf_Switch.h:94</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_gac5e39f13562ff6edde6ba90877883d8f"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#gac5e39f13562ff6edde6ba90877883d8f">CanIf::ConnectUpperLayerIndication</a></div><div class="ttdeci">Std_ReturnType ConnectUpperLayerIndication(ComStack_PduType rxPduId, const CanIfUpperLayer *p2UpperLayerObject)</div><div class="ttdoc">we need to know the connected upper layer object for rx indication</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00552">CanIf.cpp:552</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_gga7d72c75f884fc1bf3a1d61ac1d48b60da0acd345c19c6a30f356e243e0809a892"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#gga7d72c75f884fc1bf3a1d61ac1d48b60da0acd345c19c6a30f356e243e0809a892">CanIf_TxMessage_free</a></div><div class="ttdoc">the Tx Message is free for use</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00161">CanIf_Switch.h:161</a></div></div>
<div class="ttc" id="astruct_can_if___rx_buffer_type_html_a1af8f8ebdaab581377223f54577418cc"><div class="ttname"><a href="../../db/d5e/struct_can_if___rx_buffer_type.html#a1af8f8ebdaab581377223f54577418cc">CanIf_RxBufferType::BufWrPos</a></div><div class="ttdeci">uint8_t BufWrPos</div><div class="ttdoc">Position to write next Message.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00356">CanIf_Switch.h:356</a></div></div>
<div class="ttc" id="astruct_can_controller_baudrate_config_type_html_a78adeba13d12265564077a39cfa8cbed"><div class="ttname"><a href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a78adeba13d12265564077a39cfa8cbed">CanControllerBaudrateConfigType::CanControllerSeg2</a></div><div class="ttdeci">uint32_t CanControllerSeg2</div><div class="ttdoc">Specifies phase segment 2 in time quantas.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00104">CanIf_Switch.h:104</a></div></div>
<div class="ttc" id="aunion_can_if___can_id_select_type_html_a3f52c68b73e075c7f0600251e0490280"><div class="ttname"><a href="../../d7/d29/union_can_if___can_id_select_type.html#a3f52c68b73e075c7f0600251e0490280">CanIf_CanIdSelectType::stm_StdId</a></div><div class="ttdeci">CanIf_STM_StdCanIdType stm_StdId</div><div class="ttdoc">to use it on standard Ids from STM Registers</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00291">CanIf_Switch.h:291</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___buffer_cfg_html_gaff562ae1726357f9f14db73c3bb6218b"><div class="ttname"><a href="../../d3/def/group___t_m___can_if___buffer_cfg.html#gaff562ae1726357f9f14db73c3bb6218b">CANIF_TX_BUFFER_SIZE</a></div><div class="ttdeci">#define CANIF_TX_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbd/_can_if___cfg_8h_source.html#l00068">CanIf_Cfg.h:68</a></div></div>
<div class="ttc" id="agroup___t_m___can_if_cfg_html_ga441f342ee6cae3a029d66a6290e3de8e"><div class="ttname"><a href="../../d7/d66/group___t_m___can_if_cfg.html#ga441f342ee6cae3a029d66a6290e3de8e">CANIF_RXPDU_COUNT</a></div><div class="ttdeci">#define CANIF_RXPDU_COUNT</div><div class="ttdoc">number of all RxPdu-Names</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/_ecu_names___cfg_8h_source.html#l00215">EcuNames_Cfg.h:215</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_a980379d0ae81a8b7b9a3542f89ae1661"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#a980379d0ae81a8b7b9a3542f89ae1661">CanControllerParaType::AutoWakeUp</a></div><div class="ttdeci">FunctionalState AutoWakeUp</div><div class="ttdoc">use auto wake up function</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00066">CanIf_Switch.h:66</a></div></div>
<div class="ttc" id="astruct_can_if___s_t_m___ext_can_id_type_html_ab4ec4249f98e06385a9fc0fb3d6aa44c"><div class="ttname"><a href="../../d2/da0/struct_can_if___s_t_m___ext_can_id_type.html#ab4ec4249f98e06385a9fc0fb3d6aa44c">CanIf_STM_ExtCanIdType::IDE</a></div><div class="ttdeci">uint32_t IDE</div><div class="ttdoc">identifier extension</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00254">CanIf_Switch.h:254</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_ga273da582fa4fb57f121bcffe0fed4903"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#ga273da582fa4fb57f121bcffe0fed4903">CANIF_MODULE_ID</a></div><div class="ttdeci">#define CANIF_MODULE_ID</div><div class="ttdoc">module id to see where the error is come from</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbd/_can_if___cfg_8h_source.html#l00047">CanIf_Cfg.h:47</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_ggaff3f3b940bfe6523237fdac053b76532a181adf25c09173bbd78d332cfb66b99f"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a181adf25c09173bbd78d332cfb66b99f">CanIf_RxMessage_rdy2rd</a></div><div class="ttdoc">the Rx Message is ready for transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00184">CanIf_Switch.h:184</a></div></div>
<div class="ttc" id="astruct_can_if___rx_buffer_type_html_abb45e506eb7808ad6711220fa2ac368f"><div class="ttname"><a href="../../db/d5e/struct_can_if___rx_buffer_type.html#abb45e506eb7808ad6711220fa2ac368f">CanIf_RxBufferType::ptr2MsgBuffer</a></div><div class="ttdeci">CanIf_MessageType * ptr2MsgBuffer</div><div class="ttdoc">to hold the pointer to the Message buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00360">CanIf_Switch.h:360</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___main_html_gga90b5c9821ab88ba86ffbdec37ebe3071ac23e2b09ebe6bf4cb5e2a9abe85c0be2"><div class="ttname"><a href="../../d3/d86/group___t_m___can_if___main.html#gga90b5c9821ab88ba86ffbdec37ebe3071ac23e2b09ebe6bf4cb5e2a9abe85c0be2">CanIfStates::Stopped</a></div></div>
<div class="ttc" id="aunion_can_if___can_id_select_type_html_a06a2fac2df32cf81d40d40f902012e50"><div class="ttname"><a href="../../d7/d29/union_can_if___can_id_select_type.html#a06a2fac2df32cf81d40d40f902012e50">CanIf_CanIdSelectType::stm_ExtId</a></div><div class="ttdeci">CanIf_STM_ExtCanIdType stm_ExtId</div><div class="ttdoc">to use it on extended Ids from STM Registers</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00293">CanIf_Switch.h:293</a></div></div>
<div class="ttc" id="astructt_c_a_n___rx_message_html_af0f8d9bbb82a26c257f7b8953093f160"><div class="ttname"><a href="../../db/d40/structt_c_a_n___rx_message.html#af0f8d9bbb82a26c257f7b8953093f160">tCAN_RxMessage::State</a></div><div class="ttdeci">CanIf_RxMessageStateType State</div><div class="ttdoc">current state of this RxMessage</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00341">CanIf_Switch.h:341</a></div></div>
<div class="ttc" id="agroup___t_m___can_if_cfg_html_gad44163a8083a2ab035e8a006bbd120f1"><div class="ttname"><a href="../../d7/d66/group___t_m___can_if_cfg.html#gad44163a8083a2ab035e8a006bbd120f1">CanIf_TxPduIdType</a></div><div class="ttdeci">CanIf_TxPduIdType</div><div class="ttdoc">to use generic names for the PDUs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/_ecu_names___cfg_8h_source.html#l00222">EcuNames_Cfg.h:222</a></div></div>
<div class="ttc" id="aclass_can_if_html_a3590424a0f79bebd2b1c00469229756c"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a3590424a0f79bebd2b1c00469229756c">CanIf::TxTask</a></div><div class="ttdeci">void TxTask(void)</div><div class="ttdoc">task function to push the tx message from software buffer to tx mailbox</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00570">CanIf.cpp:570</a></div></div>
<div class="ttc" id="aclass_can_if_html_a4d97e025526f61553f2995cd2296e62e"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a4d97e025526f61553f2995cd2296e62e">CanIf::state</a></div><div class="ttdeci">CanIfStates state</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00323">CanIf.h:323</a></div></div>
<div class="ttc" id="astruct_can_controller_para_type_html_aa4489e65231861de02b05d5e43cf7714"><div class="ttname"><a href="../../dd/d76/struct_can_controller_para_type.html#aa4489e65231861de02b05d5e43cf7714">CanControllerParaType::ReceiveFifoLocked</a></div><div class="ttdeci">FunctionalState ReceiveFifoLocked</div><div class="ttdoc">will be the full fifo locked</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00070">CanIf_Switch.h:70</a></div></div>
<div class="ttc" id="aclass_can_if_html_ac9e0d39e49a3f00e97a606c419eeb3ac"><div class="ttname"><a href="../../d0/d88/class_can_if.html#ac9e0d39e49a3f00e97a606c419eeb3ac">CanIf::CanIdToHalFormat</a></div><div class="ttdeci">uint32_t CanIdToHalFormat(ComStack_CanIdType CanId)</div><div class="ttdoc">change the 32bit format to use with STM Registers</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00785">CanIf.cpp:785</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___func_html_ga6b6faa51ed2dc5386ccaa4c6894fc732"><div class="ttname"><a href="../../db/d0a/group___t_m___can_if___func.html#ga6b6faa51ed2dc5386ccaa4c6894fc732">CanIf::Receive</a></div><div class="ttdeci">Std_ReturnType Receive(CanIf_RxPduIdType rxPduId, const CanIf_PduInfoType *ptr2PduInfo)</div><div class="ttdoc">poll the RxBuffer for a message</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00458">CanIf.cpp:458</a></div></div>
<div class="ttc" id="astruct_can_controller_baudrate_config_type_html_a08f8f31f8d9cb043a819cf946e9f25f1"><div class="ttname"><a href="../../d1/dc3/struct_can_controller_baudrate_config_type.html#a08f8f31f8d9cb043a819cf946e9f25f1">CanControllerBaudrateConfigType::CanControllerSeg1</a></div><div class="ttdeci">uint32_t CanControllerSeg1</div><div class="ttdoc">Specifies phase segment 1 in time quantas.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00101">CanIf_Switch.h:101</a></div></div>
<div class="ttc" id="agroup___t_m___can_if_cfg_html_ga9e52c81c13b7f17073c598fadcaf8f0b"><div class="ttname"><a href="../../d7/d66/group___t_m___can_if_cfg.html#ga9e52c81c13b7f17073c598fadcaf8f0b">CanIf_RxPduIdType</a></div><div class="ttdeci">CanIf_RxPduIdType</div><div class="ttdoc">to use generic names for the PDUs</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd3/_ecu_names___cfg_8h_source.html#l00183">EcuNames_Cfg.h:183</a></div></div>
<div class="ttc" id="astruct_can_config_type_html"><div class="ttname"><a href="../../d5/dc1/struct_can_config_type.html">CanConfigType</a></div><div class="ttdoc">The structure of the overall configuration for the CAN.</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00132">CanIf_Switch.h:132</a></div></div>
<div class="ttc" id="agroup___t_m___can_if___types_html_ggaff3f3b940bfe6523237fdac053b76532a7385994669b08eb4310554c8ed2eb950"><div class="ttname"><a href="../../df/df9/group___t_m___can_if___types.html#ggaff3f3b940bfe6523237fdac053b76532a7385994669b08eb4310554c8ed2eb950">CanIf_RxMessage_rxok</a></div><div class="ttdoc">if the upper layer needs a callback we can handle a ok transmit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00188">CanIf_Switch.h:188</a></div></div>
<div class="ttc" id="a_t_m___platform___types_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../d8/dd7/_t_m___platform___types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd7/_t_m___platform___types_8h_source.html#l00063">TM_Platform_Types.h:63</a></div></div>
<div class="ttc" id="astruct_can_if___rx_buffer_type_html"><div class="ttname"><a href="../../db/d5e/struct_can_if___rx_buffer_type.html">CanIf_RxBufferType</a></div><div class="ttdoc">a simple structure to handle a software rx fifo</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00353">CanIf_Switch.h:353</a></div></div>
<div class="ttc" id="agroup___t_m___can_cfg___baud_cfg_html_gga70e0e5ae10d093bf26563e64ffd29c44a0ad17eee0054c5fe582b8c086433c9a0"><div class="ttname"><a href="../../de/d26/group___t_m___can_cfg___baud_cfg.html#gga70e0e5ae10d093bf26563e64ffd29c44a0ad17eee0054c5fe582b8c086433c9a0">CanSlaveController</a></div><div class="ttdoc">ST named the second controller Slave because of fewer configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/_can___cfg_8h_source.html#l00088">Can_Cfg.h:88</a></div></div>
<div class="ttc" id="aclass_can_if_html_a5191e6da6723030adc9e16b27546cfa5"><div class="ttname"><a href="../../d0/d88/class_can_if.html#a5191e6da6723030adc9e16b27546cfa5">CanIf::FindFreeFilter</a></div><div class="ttdeci">Std_ReturnType FindFreeFilter(const uint8_t *ptr2FilterBankNumber, const uint8_t *ptr2FilterNumber, const uint8_t *ptr2FilterMode)</div><div class="ttdoc">to find a free CAN hardware filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00618">CanIf.cpp:618</a></div></div>
<div class="ttc" id="aclass_can_if_html_ac0422a94bf7a32e882017f8ec3b6fdf6"><div class="ttname"><a href="../../d0/d88/class_can_if.html#ac0422a94bf7a32e882017f8ec3b6fdf6">CanIf::canTxBufferMirror</a></div><div class="ttdeci">CAN_TxMessage canTxBufferMirror</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8h_source.html#l00330">CanIf.h:330</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a27f064ffa1646e33eb391caf71161a12"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a27f064ffa1646e33eb391caf71161a12">HalHeaderToCanIfHeader</a></div><div class="ttdeci">Std_ReturnType HalHeaderToCanIfHeader(REF2CONST(CAN_RxHeaderTypeDef, AUTOMATIC) rev2HAL_Header, REF2VAR(ComStack_CanMsgHeader, AUTOMATIC) rev2CanIfHeader)</div><div class="ttdoc">remapping of the HAL CAN Header to the Header used inside this implementation</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00802">CanIf.cpp:802</a></div></div>
<div class="ttc" id="astruct_com_stack___can_msg_header_html_a1f926457c2a150e6a95b150b17e76415"><div class="ttname"><a href="../../d5/d65/struct_com_stack___can_msg_header.html#a1f926457c2a150e6a95b150b17e76415">ComStack_CanMsgHeader::Timestamp</a></div><div class="ttdeci">uint32_t Timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00061">TM_ComStack_Types.h:61</a></div></div>
<div class="ttc" id="aunion_can_if___can_id_select_type_html_af7da455d567222d7593f0dc89c2d3830"><div class="ttname"><a href="../../d7/d29/union_can_if___can_id_select_type.html#af7da455d567222d7593f0dc89c2d3830">CanIf_CanIdSelectType::common</a></div><div class="ttdeci">uint32_t common</div><div class="ttdoc">to use it like uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/_can_if___switch_8h_source.html#l00289">CanIf_Switch.h:289</a></div></div>
<div class="ttc" id="a_can_if_8cpp_html_a66aa86075291e668b039ac7cf2f1a9b5"><div class="ttname"><a href="../../d3/d5a/_can_if_8cpp.html#a66aa86075291e668b039ac7cf2f1a9b5">CanIfHeaderToHalHeader</a></div><div class="ttdeci">Std_ReturnType CanIfHeaderToHalHeader(REF2CONST(ComStack_CanMsgHeader, AUTOMATIC) rev2CanIfHeader, REF2VAR(CAN_RxHeaderTypeDef, AUTOMATIC) rev2HAL_Header)</div><div class="ttdoc">remapping of the CAN Header to the HAL Header used by the STM HAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/_can_if_8cpp_source.html#l00826">CanIf.cpp:826</a></div></div>
<div class="ttc" id="astruct_com_stack___can_msg_header_html_a26ccbe200baa63c451b1378125110844"><div class="ttname"><a href="../../d5/d65/struct_com_stack___can_msg_header.html#a26ccbe200baa63c451b1378125110844">ComStack_CanMsgHeader::CanId</a></div><div class="ttdeci">ComStack_CanIdType CanId</div><div class="ttdoc">The one and only CanId.</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d4d/_t_m___com_stack___types_8h_source.html#l00058">TM_ComStack_Types.h:58</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_60925fc218da8ca7908795bf5f624060.html">Drivers</a></li><li class="navelem"><a class="el" href="../../dir_0d65e5fa077ec095e65d7480f3bb9880.html">BSP</a></li><li class="navelem"><a class="el" href="../../dir_45fb0e39edf1106475bcfbabe5208558.html">TM_Engineering_board</a></li><li class="navelem"><a class="el" href="../../dir_931e191a005356959bd88fd0a521b9c5.html">CanIf</a></li><li class="navelem"><a class="el" href="../../d3/d5a/_can_if_8cpp.html">CanIf.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
